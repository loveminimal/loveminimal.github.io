<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="Ë∑®Âüü - https://aituyaa.com/%E8%B7%A8%E5%9F%9F/">
    <meta name="author" content="Jack - https://aituyaa.com/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>Ë∑®Âüü</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://aituyaa.com/style.min.46cfd43a02f0d32d5aeda510c2e7c2da418affff301ae11c64f200a1d2b033d3.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        
        <div class="cool-before" style="background: url('/imgs/bg/color.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">Ë∑®Âüü</h1>
    
        
        
            <div id="toc">üìú</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    <div class="rel">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <div class="curtag-desc">
            <a href="https://aituyaa.com/tags/javascript/"><img src="/imgs/icons/tag.svg" width="16" /> Áõ∏ÂÖ≥ÊñáÁ´†ÔºöJavaScript <sup>24</sup></a>
        </div>

        <div class="curtag-post">
            
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/ajax/">Ajax</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/callapply-%E5%92%8C-bind/">call„ÄÅapply Âíå bind</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/canvas/">Canvas</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/devmaps/frontend/">Frontend</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/js-%E4%B8%AD%E7%9A%84%E6%8B%96%E6%94%BE/">JS ‰∏≠ÁöÑÊãñÊîæ</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/js-%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E6%91%98%E5%BD%95/">JS È´òÁ∫ßÁ®ãÂ∫èËÆæËÆ°¬∑ÊëòÂΩï</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/react/">React</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/react-%E5%9F%BA%E7%A1%80%E8%84%9A%E6%89%8B%E6%9E%B6%E7%A4%BA%E4%BE%8B/">React Âü∫Á°ÄËÑöÊâãÊû∂Á§∫‰æã</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/source-map/">Source Map</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/typescript-%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/">TypeScript ÈÇ£‰∫õ‰∫ãÂÑø</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/web-%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E9%9A%8F%E6%83%B3/">Web ÂºÄÂèëÁõ∏ÂÖ≥‰ΩìÁ≥ªÁªìÊûÑÈöèÊÉ≥</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E5%85%B3%E4%BA%8E-fetch/">ÂÖ≥‰∫é fetch</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E5%85%B3%E4%BA%8E-promise/">ÂÖ≥‰∫é Promise</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E5%89%8D%E7%AB%AF%E6%B5%85%E8%B0%88/">ÂâçÁ´ØÊµÖË∞à</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%96%87%E4%BB%B6%E8%BD%AC%E6%8D%A2/">Êñá‰ª∂ËΩ¨Êç¢</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/">Ê®°ÂùóÂåñÁºñÁ®ã</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%B5%8F%E8%A7%88%E5%99%A8/">ÊµèËßàÂô®</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84%E5%B0%BA%E5%AF%B8%E5%A4%A7%E5%B0%8F%E5%92%8C%E4%BD%8D%E7%BD%AE/">ÊµèËßàÂô®‰∏≠ÁöÑÂ∞∫ÂØ∏Â§ßÂ∞èÂíå‰ΩçÁΩÆ</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B/">ÊµèËßàÂô®ÁöÑÊ∏≤ÊüìËøáÁ®ã</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F/">ÊªöÂä®Êù°Ê†∑Âºè</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E7%94%9F%E6%88%90%E5%99%A8/">ÁîüÊàêÂô®</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84%E9%94%9A%E7%82%B9%E8%B7%B3%E8%BD%AC/">ÁΩëÈ°µ‰∏≠ÁöÑÈîöÁÇπË∑≥ËΩ¨</a>
                </div>
                
                
            
            
                <div class="curtag-post-item curtag-post-item--active">
                    <a href="https://aituyaa.com/%E8%B7%A8%E5%9F%9F/">Ë∑®Âüü</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/">Èò≤Êäñ‰∏éËäÇÊµÅ</a>
                </div>
                
                
        </div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2023-05-25&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2023-09-07&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            6088 Â≠ó</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            13 ÂàÜÈíü</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
			<a href="/tags/javascript">JavaScript</a>
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#‰ªÄ‰πàÊòØË∑®Âüü">‰ªÄ‰πàÊòØË∑®Âüü</a></li>
    <li><a href="#cookie">Cookie</a></li>
    <li><a href="#iframe">iframe</a>
      <ul>
        <li><a href="#ÁâáÊÆµËØÜÂà´Á¨¶">ÁâáÊÆµËØÜÂà´Á¨¶</a></li>
        <li><a href="#windowname">window.name</a></li>
        <li><a href="#windowpostmessage">window.postMessage</a></li>
      </ul>
    </li>
    <li><a href="#ajax">AJAX</a>
      <ul>
        <li><a href="#jsonp">JSONP</a></li>
        <li><a href="#websocket">WebSocket</a></li>
        <li><a href="#cors">CORS</a></li>
      </ul>
    </li>
    <li><a href="#cors-ËØ¶Ëß£">CORS ËØ¶Ëß£</a>
      <ul>
        <li><a href="#‰∏§ÁßçËØ∑Ê±Ç">‰∏§ÁßçËØ∑Ê±Ç</a></li>
        <li><a href="#ÁÆÄÂçïËØ∑Ê±Ç">ÁÆÄÂçïËØ∑Ê±Ç</a></li>
        <li><a href="#ÈùûÁÆÄÂçïËØ∑Ê±Ç">ÈùûÁÆÄÂçïËØ∑Ê±Ç</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <p>i.e. Cross Domain</p>
<p>üîî Êú¨ÊñáÊëòÂΩïËá™¬†<a href="http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html">ÊµèËßàÂô®ÂêåÊ∫êÊîøÁ≠ñÂèäÂÖ∂ËßÑÈÅøÊñπÊ≥ï</a></p>
<h2 id="‰ªÄ‰πàÊòØË∑®Âüü">‰ªÄ‰πàÊòØË∑®Âüü</h2>
<p>Ë∑®ÂüüÔºåÊòØÊåáÊµèËßàÂô®‰∏çËÉΩÊâßË°åÂÖ∂‰ªñÁΩëÁ´ôÁöÑËÑöÊú¨ÔºåÂÆÉÊòØÊµèËßàÂô®ÁöÑÂêåÊ∫êÁ≠ñÁï•ÈÄ†ÊàêÁöÑÔºåÊòØÊµèËßàÂô®ÂØπ JavaScript ÂÆûÊñΩÁöÑÂÆâÂÖ®ÈôêÂà∂„ÄÇ</p>
<p>ÈÇ£‰πàÔºå‰ªÄ‰πàÊòØÂêåÊ∫êÁ≠ñÁï•Âë¢Ôºü</p>
<p>ÂêåÊ∫êÁ≠ñÁï•ÔºåÊòØÁî± Netscape ÂÖ¨Âè∏‰∫é 1995 Âπ¥ÂºïÂÖ•ÊµèËßàÂô®ÁöÑÔºåÁõÆÂâçÔºåÊâÄÊúâÊµèËßàÂô®ÈÉΩÂÆûË°åËøô‰∏™Á≠ñÁï•„ÄÇ</p>
<p>‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂêåÊ∫êÁ≠ñÁï•Âë¢Ôºü</p>
<p>ÂêåÊ∫êÁ≠ñÁï•ÁöÑÁõÆÁöÑÔºåÊòØ‰∏∫‰∫Ü‰øùËØÅÁî®Êà∑‰ø°ÊÅØÁöÑÂÆâÂÖ®ÔºåÈò≤Ê≠¢ÊÅ∂ÊÑèÁöÑÁΩëÁ´ôÁ™ÉÂèñÊï∞ÊçÆ„ÄÇ</p>
<blockquote>
<p>:: ÊØè‰∏Ä‰ª∂‰∫ãÁâ©ÈÉΩÊúâÂÖ∂‰∫ßÁîüÁöÑÊ∫êÂ§¥‚Ä¶‚Ä¶</p>
</blockquote>
<p>ÊúÄÂàùÔºåÂÆÉÁöÑÂê´‰πâÊòØÔºåA ÁΩëÈ°µËÆæÁΩÆÁöÑ Cookie ÔºåB ÁΩëÈ°µ‰∏çËÉΩÊâìÂºÄÔºåÈô§ÈùûËøô‰∏§‰∏™ÁΩëÈ°µ‚ÄúÂêåÊ∫ê‚Äù ‚Äì ÂçèËÆÆÁõ∏Âêå„ÄÅÂüüÂêçÁõ∏Âêå„ÄÅÁ´ØÂè£Áõ∏Âêå„ÄÇ</p>
<blockquote>
<p>:: Cookie ÂæÄÂæÄÁî®Êù•‰øùÂ≠òÁî®Êà∑ÁöÑÁôªÂΩïÁä∂ÊÄÅÔºåÊâÄ‰ª•‚ÄúÂêåÊ∫êÁ≠ñÁï•‚ÄùÊòØÂøÖÈúÄÁöÑÔºåÂê¶Âàô Cookie ÂèØ‰ª•ÂÖ±‰∫´Ôºå‰∫íËÅîÁΩëÂ∞±ÊØ´Êó†ÂÆâÂÖ®ÂèØË®Ä‰∫Ü„ÄÇ</p>
</blockquote>
<p>ÈöèÁùÄ‰∫íËÅîÁΩëÁöÑÂèëÂ±ïÔºå‚ÄúÂêåÊ∫êÁ≠ñÁï•‚ÄùË∂äÊù•Ë∂ä‰∏•Ê†º„ÄÇÁõÆÂâçÔºåÂ¶ÇÊûúÈùûÂêåÊ∫êÔºåÂÖ±Êúâ‰∏âÁßçË°å‰∏∫ÂèóÂà∞ÈôêÂà∂Ôºö</p>
<ol>
<li>Cookie„ÄÅLocalStorage Âíå IndexDB Êó†Ê≥ïËØªÂèñÔºõ</li>
<li>DOM Êó†Ê≥ïËé∑ÂæóÔºõ</li>
<li>AJAX ËØ∑Ê±Ç‰∏çËÉΩÂèëÈÄÅ„ÄÇ</li>
</ol>
<p>Ë∑®ÂüüÁöÑÈôêÂà∂ÂΩìÁÑ∂ÊòØÊúâÂøÖË¶ÅÁöÑÔºå‰ΩÜÂÆûÈôÖÂ∫îÁî®ËøáÁ®ã‰∏≠‰πüÂ∏∏Â∏∏ÈúÄË¶ÅÂú®‰øùËØÅÁõ∏ÂØπÂÆâÂÖ®ÁöÑÊÉÖÂÜµ‰∏ãËßÑÈÅø‰∏äËø∞ÁöÑ‰∏âÁßçÈôêÂà∂„ÄÇ</p>
<blockquote>
<p>:: ÂæÄÂæÄÊòØËøôÊ†∑ÔºåÂª∫Á´ãÁöÑÊùüÁºöÂ∞±ÊòØÁî®Êù•ÊâìÊå£ËÑ±ÁöÑ‚Ä¶‚Ä¶ Âú®ÂêåÊ∫êÁ≠ñÁï•‰∏çÂÖÅËÆ∏Ë∑®ÂüüÁöÑÈÇ£‰∏ÄÂàªÔºå‰πüÂ∞±‰∫ßÁîü‰∫ÜÈúÄË¶ÅË∑®ÂüüÁöÑÈúÄÊ±Ç„ÄÇ</p>
</blockquote>
<h2 id="cookie">Cookie</h2>
<p>Cookie ÊòØÊúçÂä°Âô®ÂÜôÂÖ•ÊµèËßàÂô®ÁöÑ‰∏ÄÂ∞èÊÆµ‰ø°ÊÅØ ÔºåÂè™ÊúâÂêåÊ∫êÁΩëÈ°µÊâçËÉΩÂÖ±‰∫´„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰∏§‰∏™ÁΩëÈ°µÁöÑ‰∏ÄÁ∫ßÂüüÂêçÁõ∏ÂêåÔºåÂè™ÊòØ‰∫åÁ∫ßÂüüÂêç‰∏çÂêåÔºåÊµèËßàÂô®ÂÖÅËÆ∏ÈÄöËøáËÆæÁΩÆ =document.domain= ÂÖ±‰∫´ Cookie „ÄÇ</p>
<blockquote>
<p>*Ê≥®ÔºöCookie ÊòØÊúçÂä°Âô®ÂÜôÂÖ•ÊµèËßàÂô®ÁöÑ‰ø°ÊÅØÂì¶ÔºÅ</p>
</blockquote>
<p>‰∏æ‰æãÊù•ËØ¥ÔºåA ÁΩëÈ°µÊòØ¬†<code>http://w1.example.com/a.html</code>¬†ÔºåB ÁΩëÈ°µÊòØ¬†<code>http://w2.example.com/b.html</code>¬†ÔºåÈÇ£‰πàÂè™Ë¶ÅËÆæÁΩÆÁõ∏ÂêåÁöÑ¬†<code>document.domain</code>¬†Ôºå‰∏§‰∏™ÁΩëÈ°µÂ∞±ÂèØ‰ª•ÂÖ±‰∫´ Cookie „ÄÇ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">document</span>.domain <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;example.com&#39;</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞Âú®ÔºåA ÁΩëÈ°µÈÄöËøáËÑöÊú¨ËÆæÁΩÆ‰∏Ä‰∏™ Cookie Ôºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">document</span>.cookie <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;test1=hello&#39;</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>B ÁΩëÈ°µÂ∞±ÂèØ‰ª•ËØªÂà∞Ëøô‰∏™ Cookie Ôºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> allCookie <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">document</span>.cookie;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÔºöËøôÁßçÊñπÊ≥ïÂè™ÈÄÇÁî®‰∫é Cookie Âíå iframe Á™óÂè£ÔºåLocalStorage Âíå IndexDB Êó†Ê≥ïÈÄöËøáËøôÁßçÊñπÊ≥ïÔºàË¶Å‰ΩøÁî® PostMessage APIÔºâ„ÄÇ</p>
<p>Âè¶Â§ñÔºåÊúçÂä°Âô®‰πüÂèØ‰ª•Âú®ËÆæÁΩÆ Cookie ÁöÑÊó∂ÂÄôÔºåÊåáÂÆö Cookie ÁöÑÊâÄÂ±ûÂüüÂêç‰∏∫‰∏ÄÁ∫ßÂüüÂêçÔºåÊØîÂ¶Ç¬†<code>.example.com</code>¬†Ôºö</p>
<pre tabindex="0"><code>Set-Cookie: key=value; domain=.example.com; path=/
</code></pre><p>Â¶ÇÊ≠§Ôºå‰∫åÁ∫ßÂüüÂêçÂíå‰∏âÁ∫ßÂüüÂêç‰∏çÁî®ÂÅö‰ªª‰ΩïËÆæÁΩÆÔºåÈÉΩÂèØ‰ª•ËØªÂèñËøô‰∏™ Cookie „ÄÇ</p>
<blockquote>
<p>:: Êó®Âú®ÁêÜËß£ÂêßÔºåÂ∑≤ÁªèÊòØË¢´Êó∂‰ª£Ê∑òÊ±∞‰∫ÜÁöÑ‰∏ú‰∏ú‰∫Ü‚Ä¶‚Ä¶</p>
</blockquote>
<h2 id="iframe">iframe</h2>
<p>Â¶ÇÊûú‰∏§‰∏™ÁΩëÈ°µ‰∏çÂêåÊ∫êÔºåÂ∞±Êó†Ê≥ïÊãøÂà∞ÂØπÊñπÁöÑ DOM ÔºåÂÖ∏ÂûãÁöÑ‰æãÂ≠êÊòØ¬†<code>iframe</code>¬†Á™óÂè£Âíå¬†<code>window.open</code>¬†ÊñπÊ≥ïÊâìÂºÄÁöÑÁ™óÂè£ÔºåÂÆÉ‰ª¨‰∏éÁà∂Á™óÂè£Êó†Ê≥ïÈÄö‰ø°„ÄÇ</p>
<p>Â¶ÇÊûú‰∏§‰∏™Á™óÂè£‰∏ÄÁ∫ßÂüüÂêçÁõ∏ÂêåÔºåÂè™ÊòØ‰∫åÁ∫ßÂüüÂêç‰∏çÂêåÔºåÈÇ£‰πàËÆæÁΩÆ¬†<code>document.domain</code>¬†Â±ûÊÄßÔºåÂ∞±ÂèØ‰ª•ËßÑÈÅøÂêåÊ∫êÁ≠ñÁï•ÔºåÊãøÂà∞ DOM „ÄÇ</p>
<p>ÂØπ‰∫éÂÆåÂÖ®‰∏çÂêåÊ∫êÁöÑÁΩëÁ´ôÔºåÁõÆÂâçÊúâ‰∏âÁßçÊñπÊ≥ïÔºåÂèØ‰ª•Ëß£ÂÜ≥Ë∑®ÂüüÁ™óÂè£ÁöÑÈÄö‰ø°ÈóÆÈ¢òÔºö</p>
<ul>
<li>ÁâáÊÆµËØÜÂà´Á¨¶Ôºàfragment identifierÔºâÔºõ</li>
<li>window.name Ôºõ</li>
<li>Ë∑®ÊñáÊ°£ÈÄö‰ø° API ÔºàCross-document messagingÔºâ„ÄÇ</li>
</ul>
<h3 id="ÁâáÊÆµËØÜÂà´Á¨¶">ÁâáÊÆµËØÜÂà´Á¨¶</h3>
<p>ÁâáÊÆµËØÜÂà´Á¨¶ Ôºàfragment identifierÔºâÔºåÊòØÊåá URL ÁöÑ¬†<code>#</code>¬†Âè∑ÂêéÈù¢ÁöÑÈÉ®ÂàÜÔºåÂ¶Ç¬†<code>http://example.com/x.html#fragment</code>¬†ÁöÑ¬†<code>#fragment</code>¬†„ÄÇÂ¶ÇÊûúÔºåÂè™ÊòØÊîπÂèòÁâáÊÆµËØÜÂà´Á¨¶ÔºåÈ°µÈù¢‰∏ç‰ºöÈáçÊñ∞Âà∑Êñ∞„ÄÇ</p>
<p>Áà∂Á™óÂè£ÂèØ‰ª•Êää‰ø°ÊÅØÔºåÂÜôÂÖ•Â≠êÁ™óÂè£ÁöÑÁâáÊÆµËØÜÂà´Á¨¶ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> src <span style="color:#000;font-weight:bold">=</span> originURL <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#39;#&#39;</span> <span style="color:#000;font-weight:bold">+</span> data;
</span></span><span style="display:flex;"><span><span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;myIFrame&#39;</span>).src <span style="color:#000;font-weight:bold">=</span> src;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â≠êÁ™óÂè£ÈÄöËøáÁõëÂê¨¬†<code>hashchange</code>¬†‰∫ã‰ª∂ÂæóÂà∞ÈÄöÁü•ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">window</span>.onhashchange <span style="color:#000;font-weight:bold">=</span> checkMessage;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> checkMessage() {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> message <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">window</span>.location.hash;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêåÊ†∑ÁöÑÔºåÂ≠êÁ™óÂè£‰πüÂèØ‰ª•ÊîπÂèòÁà∂Á™óÂè£ÁöÑÁâáÊÆµÊ†áËØÜÁ¨¶Ôºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>parent.location.href <span style="color:#000;font-weight:bold">=</span> target <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#39;#&#39;</span> <span style="color:#000;font-weight:bold">+</span> hash;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="windowname">window.name</h3>
<p>ÊµèËßàÂô®Á™óÂè£Êúâ¬†<code>window.name</code>¬†Â±ûÊÄßÔºåÂÆÉÁöÑÊúÄÂ§ßÁâπÁÇπÊòØÔºåÊó†ËÆ∫ÊòØÂê¶ÂêåÊ∫êÔºåÂè™Ë¶ÅÂú®Âêå‰∏Ä‰∏™Á™óÂè£ÈáåÔºåÂâç‰∏Ä‰∏™ÁΩëÈ°µËÆæÁΩÆ‰∫ÜËøô‰∏™Â±ûÊÄßÔºåÂêé‰∏Ä‰∏™ÁΩëÈ°µÂ∞±ÂèØ‰ª•ËØªÂèñÂÆÉ„ÄÇ</p>
<p>Êù•Áúã‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑ‰æãÂ≠êÂêß„ÄÇ</p>
<p>Áà∂Á™óÂè£ÂÖàÊâìÂºÄ‰∏Ä‰∏™Â≠êÁ™óÂè£ÔºåËΩΩÂÖ•‰∏Ä‰∏™‰∏çÂêåÊ∫êÁöÑÁΩëÈ°µÔºåËØ•ÁΩëÈ°µÂ∞Ü‰ø°ÊÅØÂÜôÂÖ•¬†<code>window.name</code>¬†Â±ûÊÄßÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">window</span>.name <span style="color:#000;font-weight:bold">=</span> data;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êé•ÁùÄÔºåÂ≠êÁ™óÂè£Ë∑≥Âõû‰∏Ä‰∏™‰∏é‰∏ªÁ™óÂè£ÂêåÂüüÁöÑÁΩëÂùÄÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>location <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;http://parent.url.com/xxx.html&#39;</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÔºå‰∏ªÁ™óÂè£Â∞±ÂèØ‰ª•ËØªÂèñÂ≠êÁ™óÂè£ÁöÑ¬†<code>window.name</code>¬†‰∫ÜÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> data <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;myFrame&#39;</span>).contentWindow.name;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÊñπÊ≥ïÁöÑ‰ºòÁÇπÊòØÔºå¬†<code>window.name</code>¬†ÂÆπÈáèÂæàÂ§ßÔºåÂèØ‰ª•ÊîæÁΩÆÈùûÂ∏∏ÈïøÁöÑÂ≠óÁ¨¶‰∏≤ÔºõÁº∫ÁÇπÊòØÂøÖÈ°ªÁõëÂê¨Â≠êÁ™óÂè£¬†<code>window.name</code>¬†Â±ûÊÄßÁöÑÂèòÂåñÔºåÂΩ±ÂìçÁΩëÈ°µÊÄßËÉΩ„ÄÇ</p>
<blockquote>
<p>:: ‰∏çÂº∫Âà∂ÂÖºÂÆπ IE ÁöÑËØùÔºåÂÆûÂú®‰∏çÊÉ≥Á¢∞ËøôÁé©ÊÑèÂÑø„ÄÇ..</p>
</blockquote>
<h3 id="windowpostmessage">window.postMessage</h3>
<p>ÁâáÊÆµËØÜÂà´Á¨¶Âíå¬†<code>window.name</code>¬†‰∏§ÁßçÊñπÊ≥ïÈÉΩÂ±û‰∫éÁ†¥Ëß£ÔºåHTML5 ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂºïÂÖ•‰∫Ü‰∏Ä‰∏™ÂÖ®Êñ∞ÁöÑ API ‚Äì Ë∑®ÊñáÊ°£ÈÄö‰ø° API ÔºàCross-document messagingÔºâ„ÄÇ</p>
<blockquote>
<p>:: ÊâÄË∞ìÁ†¥Ëß£ÔºåÂ∞±ÊòØÊääÂÖ¨È∏°ÁöÑÂ∑•‰Ωú‰∫§ÁªôÂ§ßÈπÖÂéªÂÅöÔºåËôΩÁÑ∂‰πüËÉΩÂè´‰Ω†Ëµ∑Â∫äÔºå‰ΩÜÊÄªÂΩí‰∏çÈÇ£‰πàÊÇ¶ËÄ≥„ÄÇ</p>
</blockquote>
<p>Ëøô‰∏™ API ‰∏∫¬†<code>window</code>¬†ÂØπË±°Êñ∞Â¢û‰∫Ü‰∏Ä‰∏™¬†<code>window.postMessage</code>¬†ÊñπÊ≥ïÔºåÂÖÅËÆ∏Ë∑®Á™óÂè£ÈÄö‰ø°Ôºå‰∏çËÆ∫Ëøô‰∏§‰∏™Á™óÂè£ÊòØÂê¶ÂêåÊ∫ê„ÄÇ</p>
<p>Áà∂Á™óÂè£¬†<code>http://aaa.com</code>¬†ÂêëÂ≠êÁ™óÂè£¬†<code>http://bbb.com</code>¬†ÂèëÊ∂àÊÅØÔºåË∞ÉÁî®¬†<code>postMessage</code>¬†ÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> popup <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">window</span>.open(<span style="color:#d14">&#39;http://bbb.com&#39;</span>, <span style="color:#d14">&#39;title&#39;</span>);
</span></span><span style="display:flex;"><span>popup.postMessage(<span style="color:#d14">&#39;Hello World!&#39;</span>, <span style="color:#d14">&#39;http://bbb.com&#39;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠Ôºå¬†<code>postMessage</code>¬†ÊñπÊ≥ïÁöÑÔºö</p>
<ul>
<li>Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÂÖ∑‰ΩìÁöÑ‰ø°ÊÅØÂÜÖÂÆπÔºõ</li>
<li>Á¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÊé•Êî∂Ê∂àÊÅØÁöÑÁ™óÂè£ÁöÑÊ∫êÔºàoriginÔºâÔºåÂç≥‚ÄúÂçèËÆÆ+ÂüüÂêç+Á´ØÂè£‚ÄùÔºå‰πüÂèØ‰ª•ËÆæ‰∏∫¬†<code>*</code>¬†ÔºåË°®Á§∫‰∏çÈôêÂà∂ÂüüÂêçÔºåÂêëÊâÄÊúâÁ™óÂè£ÂèëÈÄÅ„ÄÇ</li>
</ul>
<p>Â≠êÁ™óÂè£ÂêëÁà∂Á™óÂè£ÂèëÈÄÅÊ∂àÊÅØÁöÑÂÜôÊ≥ïÁ±ª‰ººÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">window</span>.opener.postMessage(<span style="color:#d14">&#39;Nice to see you&#39;</span>, <span style="color:#d14">&#39;http://aaa.com&#39;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áà∂Á™óÂè£ÂíåÂ≠êÁ™óÂè£ÈÉΩÂèØ‰ª•ÈÄöËøá¬†<code>message</code>¬†‰∫ã‰ª∂ÔºåÁõëÂê¨ÂØπÊñπÁöÑÊ∂àÊÅØÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">window</span>.addEventListener(
</span></span><span style="display:flex;"><span>    <span style="color:#d14">&#39;message&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">function</span> (e) {
</span></span><span style="display:flex;"><span>        console.log(e.data);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>message</code>¬†‰∫ã‰ª∂ÁöÑ‰∫ã‰ª∂ÂØπË±°¬†<code>event</code>¬†ÔºåÊèê‰æõ‰∫Ü‰ª•‰∏ã‰∏â‰∏™Â±ûÊÄßÔºö</p>
<ul>
<li><code>event.source</code>¬†ÔºöÂèëÈÄÅÊ∂àÊÅØÁöÑÁ™óÂè£Ôºõ</li>
<li><code>event.origin</code>¬†ÔºöÊ∂àÊÅØÂèëÂêëÁöÑÁΩëÂùÄÔºõ</li>
<li><code>event.data</code>¬†ÔºöÊ∂àÊÅØÂÜÖÂÆπ„ÄÇ</li>
</ul>
</blockquote>
<p>‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòØÔºåÂ≠êÁ™óÂè£ÈÄöËøá¬†<code>event.source</code>¬†Â±ûÊÄßÂºïÁî®Áà∂Á™óÂè£ÔºåÁÑ∂ÂêéÂèëÊ∂àÊÅØÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">window</span>.addEventListener(<span style="color:#d14">&#39;message&#39;</span>, receiveMessage);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> receiveMessage(event) {
</span></span><span style="display:flex;"><span>    event.source.postMessage(<span style="color:#d14">&#39;Nice to see you!&#39;</span>, <span style="color:#d14">&#39;*&#39;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>event.origin</code>¬†Â±ûÊÄßÂèØ‰ª•ËøáÊª§‰∏çÊòØÂèëÁªôÊú¨Á™óÂè£ÁöÑÊ∂àÊÅØÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">window</span>.addEventListener(<span style="color:#d14">&#39;message&#39;</span>, receiveMessage);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> receiveMessage(event) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> (event.origin <span style="color:#000;font-weight:bold">!==</span> <span style="color:#d14">&#39;http://aaa.com&#39;</span>) <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> (event.data <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;Hello World&#39;</span>) {
</span></span><span style="display:flex;"><span>        event.source.postMessage(<span style="color:#d14">&#39;Hello&#39;</span>, event.origin);
</span></span><span style="display:flex;"><span>    } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        console.log(event.data);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøá¬†<code>window.postMessage</code>¬†ÔºåËØªÂÜôÂÖ∂‰ªñÁ™óÂè£ÁöÑ LocalStorage ‰πüÊàê‰∏∫‰∫ÜÂèØËÉΩ„ÄÇ</p>
<blockquote>
<p>:: ÂÖ∂ÂÆûÂêßÔºåÂè™Ë¶ÅÊòØËÉΩÂ∫èÂàóÂåñÂ≠óÁ¨¶‰∏≤ÁöÑ‰ø°ÊÅØÔºåÈÉΩÂèØ‰ª•‰º†ÈÄí„ÄÇ</p>
</blockquote>
<p>‰æãÂ¶ÇÔºå‰∏ªÁ™óÂè£ÂÜôÂÖ• iframe Â≠êÁ™óÂè£ÁöÑ¬†<code>localStorage</code>¬†Ôºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#0086b3">window</span>.onmessage <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> (e) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> (e.origin <span style="color:#000;font-weight:bold">!==</span> <span style="color:#d14">&#39;http://bbb.com&#39;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> payload <span style="color:#000;font-weight:bold">=</span> JSON.parse(e.data);
</span></span><span style="display:flex;"><span>    localStorage.setItem(payload.key, JSON.stringfy(payload.data)); <span style="color:#998;font-style:italic">// ?? payload.data
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>};
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠ÔºåÁà∂Á™óÂè£ÂèëÈÄÅÊ∂àÊÅØÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> win <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">document</span>.getElementByTagName(<span style="color:#d14">&#39;iframe&#39;</span>)[<span style="color:#099">0</span>].contentWindow;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> obj <span style="color:#000;font-weight:bold">=</span> { name<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;Jack&#39;</span> };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>win.postMessage(JSON.stringfy({ key<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;storage&#39;</span>, data<span style="color:#000;font-weight:bold">:</span> obj }), <span style="color:#d14">&#39;http://bbb.com&#39;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>:: ‰∏ãÈù¢Êù•‰∏™Âä†Âº∫ÁâàÁöÑ„ÄÇ..</p>
</blockquote>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// Âä†Âº∫ÁâàÁöÑÁà∂Á™óÂè£ÂèëÊ∂àÊÅØ ///
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> win <span style="color:#000;font-weight:bold">=</span> doucment.getElementByTagName(<span style="color:#d14">&#39;iframe&#39;</span>)[<span style="color:#099">0</span>].contentWindow;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> obj <span style="color:#000;font-weight:bold">=</span> { name<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;Jack&#39;</span> };
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// Â≠òÂÖ•ÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>win.postMessage(
</span></span><span style="display:flex;"><span>    JSON.stringfy({ key<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;storage&#39;</span>, method<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;set&#39;</span>, data<span style="color:#000;font-weight:bold">:</span> obj }),
</span></span><span style="display:flex;"><span>    <span style="color:#d14">&#39;http://bbb.com&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ËØªÂèñÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>win.postMessage(JSON.stringfy({ key<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;storage&#39;</span>, method<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;get&#39;</span> }), <span style="color:#d14">&#39;*&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0086b3">window</span>.onmessage <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> (e) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> (e.origin <span style="color:#000;font-weight:bold">!=</span> <span style="color:#d14">&#39;http://aaa.com&#39;</span>) <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    console.log(JSON.parse(e.data).name); <span style="color:#998;font-style:italic">// ‚Üí &#34;Jack&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>};
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// Âä†Âº∫ÁâàÁöÑÂ≠êÁ™óÂè£Êé•Êî∂Ê∂àÊÅØ ///
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">window</span>.onmessage <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> (e) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> (e.origin <span style="color:#000;font-weight:bold">!==</span> <span style="color:#d14">&#39;http://bbb.com&#39;</span>) <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> payload <span style="color:#000;font-weight:bold">=</span> JSON.parse(e.data);
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">switch</span> (payload.method) {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;set&#39;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>            localStorage.setItem(payload.key, JSON.stringfy(payload.data));
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;get&#39;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">var</span> parent <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">window</span>.parent;
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">var</span> data <span style="color:#000;font-weight:bold">=</span> localStorage.getItem(payload.key);
</span></span><span style="display:flex;"><span>            parent.postMessage(data, <span style="color:#d14">&#39;http://aaa.com&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;remove&#39;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>            localStorage.removeItem(payload.key);
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>:: ‰ªéÊú¨Ë¥®‰∏äÊù•ËØ¥ÔºåËøôÂá†ÁßçÊñπÊ≥ïÈÉΩÊòØÂà©Áî®ÊµèËßàÂô®ÁöÑÊüê‰∫õ‰ø°ÊÅØ‰øùÁïôÊú∫Âà∂ÔºåÊää‰ø°ÊÅØÂ∫èÂàóÂåñ‰∏∫Â≠óÁ¨¶‰∏≤Ôºå‰ª•ÂèÇÊï∞ÂΩ¢ÂºèÂú®Ë∑®ÂüüÁ™óÂè£‰πãÈó¥ÁöÑ‰º†ÈÄí„ÄÇ</p>
</blockquote>
<h2 id="ajax">AJAX</h2>
<p>ÊµèËßàÂô®ÁöÑÂêåÊ∫êÁ≠ñÁï•ËßÑÂÆöÔºå AJAX ËØ∑Ê±ÇÂè™ËÉΩÂèëÁªôÂêåÊ∫êÁöÑÁΩëÂùÄ ÔºåÂê¶ÂàôÂ∞±Êä•Èîô„ÄÇ</p>
<p>Èô§‰∫ÜÊû∂ËÆæÊúçÂä°Âô®‰ª£ÁêÜÔºàÊµèËßàÂô®ËØ∑Ê±ÇÂêåÊ∫êÊúçÂä°Âô®ÔºåÂÜçÁî±ÂêéËÄÖËØ∑Ê±ÇÂ§ñÈÉ®ÊúçÂä°ÔºâÔºåÊúâ‰∏âÁßçÊñπÊ≥ïËßÑÈÅøËøô‰∏™ÈôêÂà∂Ôºö JSONP„ÄÅWebSocket„ÄÅCORS „ÄÇ</p>
<blockquote>
<p>:: ËøôÈáåÊû∂ËÆæÁöÑÊúçÂä°Âô®ÊòØÁî®Êù•‰ª£ÁêÜÂÆ¢Êà∑Á´ØÁöÑÔºåÊòØÊ≠£Âêë‰ª£ÁêÜ„ÄÇ</p>
</blockquote>
<h3 id="jsonp">JSONP</h3>
<p>JSONP ÊòØÊúçÂä°Âô®‰∏éÂÆ¢Êà∑Á´ØË∑®Ê∫êÈÄö‰ø°ÁöÑÂ∏∏Áî®ÊñπÊ≥ï„ÄÇÊúÄÂ§ßÁâπÁÇπÂ∞±ÊòØÁÆÄÂçïÈÄÇÁî®ÔºåËÄÅÂºèÊµèËßàÂô®ÂÖ®ÈÉ®ÊîØÊåÅÔºåÊúçÂä°Âô®ÊîπÈÄ†ÈùûÂ∏∏Â∞è„ÄÇ</p>
<blockquote>
<p>:: ÂæàÁÆÄÂçïÔºå‰ΩÜÁº∫ÁÇπÂú®‰∫é JSONP Âè™ÊîØÊåÅ¬†<code>GET</code>¬†ËØ∑Ê±Ç„ÄÇ</p>
</blockquote>
<p>JSONP ÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØ‰ªÄ‰πàÔºü</p>
<p>ÂéüÊù•ÔºåÁΩëÈ°µÈÄöËøáÊ∑ªÂä†‰∏Ä‰∏™¬†<code>&lt;script&gt;</code>¬†ÂÖÉÁ¥†ÔºåÂêëÊúçÂä°Âô®ËØ∑Ê±Ç JSON Êï∞ÊçÆÁöÑÂÅöÊ≥ïÊòØ‰∏çÂèóÂêåÊ∫êÁ≠ñÁï•ÈôêÂà∂ÁöÑÔºõÊúçÂä°Âô®Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂ∞ÜÊï∞ÊçÆÊîæÂú®‰∏Ä‰∏™ÊåáÂÆöÂêçÂ≠óÁöÑÂõûË∞ÉÂáΩÊï∞Èáå‰º†ÂõûÊù•„ÄÇ</p>
<blockquote>
<p>:: ÈÄöËøá¬†<code>script</code>¬†Ê†áÁ≠æÁöÑ¬†<code>src</code>¬†Â±ûÊÄßÂÄº‰Ωú‰∏∫ËØ∑Ê±ÇÂú∞ÂùÄÔºå666 „ÄÇ</p>
</blockquote>
<p>È¶ñÂÖàÔºåÁΩëÈ°µÂä®ÊÄÅÊèíÂÖ•¬†<code>&lt;script&gt;</code>¬†ÂÖÉÁ¥†ÔºåÁî±ÂÆÉÂêëË∑®Ê∫êÁΩëÂùÄÂèëÂá∫ËØ∑Ê±ÇÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> addScriptTag(src) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> script <span style="color:#000;font-weight:bold">=</span> doucment.createElement(<span style="color:#d14">&#39;script&#39;</span>);
</span></span><span style="display:flex;"><span>    script.setAttribute(<span style="color:#d14">&#39;type&#39;</span>, <span style="color:#d14">&#39;text/javascript&#39;</span>);
</span></span><span style="display:flex;"><span>    script.src <span style="color:#000;font-weight:bold">=</span> src;
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">document</span>.body.appendChild(script);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0086b3">window</span>.onload <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> () {
</span></span><span style="display:flex;"><span>    addScriptTag(<span style="color:#d14">&#39;http://example.com/jp?callback=foo&#39;</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> foo(data) {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#d14">&#39;Your public IP address is: &#39;</span> <span style="color:#000;font-weight:bold">+</span> data.ip);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏äËø∞‰ª£Á†ÅÈÄöËøáÂä®ÊÄÅÊ∑ªÂä†¬†<code>&lt;script&gt;</code>¬†ÂÖÉÁ¥†ÔºåÂêëÊúçÂä°Âô®¬†<code>example.com</code>¬†ÂèëÂá∫ËØ∑Ê±Ç„ÄÇ</p>
<p>Ê≥®ÔºöËØ•ËØ∑Ê±ÇÁöÑÊü•ËØ¢Â≠óÁ¨¶‰∏≤Êúâ‰∏Ä‰∏™¬†<code>callback</code>¬†ÂèÇÊï∞ÔºåÁî®Êù•ÊåáÂÆöÂõûË∞ÉÂáΩÊï∞ÁöÑÂêçÂ≠óÔºåÂú®ÂØπ‰∫é JSONP ÊòØÂøÖÈúÄÁöÑ„ÄÇ</p>
<p>ÊúçÂä°Âô®Êî∂Âà∞Ëøô‰∏™ËØ∑Ê±ÇÂêéÔºå‰ºöÂ∞ÜÊï∞ÊçÆÊîæÂú®ÂõûË∞ÉÂáΩÊï∞ÁöÑÂèÇÊï∞‰ΩçÁΩÆËøîÂõûÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>foo({
</span></span><span style="display:flex;"><span>    ip<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;8.8.8.8&#39;</span>,
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫é¬†<code>&lt;script&gt;</code>¬†ÂÖÉÁ¥†ËØ∑Ê±ÇÁöÑËÑöÊú¨ÔºåÁõ¥Êé•‰Ωú‰∏∫‰ª£Á†ÅËøêË°å„ÄÇËøôÊó∂ÔºåÂè™Ë¶ÅÊµèËßàÂô®ÂÆö‰πâ‰∫Ü¬†<code>foo</code>¬†ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞Â∞±‰ºöÁ´ãÂç≥Ë∞ÉÁî®„ÄÇ‰Ωú‰∏∫ÂèÇÊï∞ÁöÑ JSON Êï∞ÊçÆË¢´ËßÜ‰∏∫ JavaScript ÂØπË±°ÔºåËÄå‰∏çÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂõ†Ê≠§ÈÅøÂÖç‰∫Ü‰ΩøÁî®¬†<code>JSON.parse</code>¬†ÁöÑÊ≠•È™§„ÄÇ</p>
<h3 id="websocket">WebSocket</h3>
<p>WebSocket ÊòØ‰∏ÄÁßçÈÄö‰ø°ÂçèËÆÆÔºå‰ΩøÁî®¬†<code>ws://</code>¬†ÔºàÈùûÂä†ÂØÜÔºâÂíå¬†<code>wss://</code>¬†ÔºàÂä†ÂØÜÔºâ‰Ωú‰∏∫ÂçèËÆÆÂâçÁºÄ„ÄÇËØ•ÂçèËÆÆ ‰∏çÂÆûË°åÂêåÊ∫êÁ≠ñÁï• ÔºåÂè™Ë¶ÅÊúçÂä°Âô®ÊîØÊåÅÔºåÂ∞±ÂèØ‰ª•ÈÄöËøáÂÆÉËøõË°åË∑®Ê∫êÈÄö‰ø°„ÄÇ</p>
<p>Êù•Áúã‰∏™‰æãÂ≠êÔºå‰∏ãÈù¢ÊòØÊµèËßàÂô®ÂèëÂá∫ÁöÑ WebSocket ËØ∑Ê±ÇÁöÑÂ§¥‰ø°ÊÅØÔºö</p>
<pre tabindex="0"><code>GET /chat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat, superchat
Sec-WebSocket-Version: 13
Origin: http://example.com
</code></pre><p>ÂÖ∂‰∏≠Ôºå¬†<code>Origin</code>¬†Ë°®Á§∫ËØ•ËØ∑Ê±ÇÁöÑËØ∑Ê±ÇÊ∫êÔºàoriginÔºâÔºåÂç≥ÂèëËá™Âì™‰∏™ÂüüÂêç„ÄÇ</p>
<blockquote>
<p>Ê≥®ÔºöÊ≠£ÊòØÂõ†‰∏∫Êúâ‰∫Ü¬†<code>Origin</code>¬†Ëøô‰∏™Â≠óÊÆµÔºåWebSocket ÊâçÊ≤°ÊúâÂÆûË°åÂêåÊ∫êÁ≠ñÁï•ÔºåÂõ†‰∏∫ÊúçÂä°Âô®ÂèØ‰ª•Ê†πÊçÆËøô‰∏™Â≠óÊÆµÔºåÂà§Êñ≠ÊòØÂê¶ÂÖÅËÆ∏Êú¨Ê¨°ÈÄö‰ø°„ÄÇ</p>
</blockquote>
<p>Â¶ÇÊûúËØ•ÂüüÂêçÂú®ÁôΩÂêçÂçïÂÜÖÔºåÊúçÂä°Âô®Â∞±‰ºöÂÅöÂá∫Â¶Ç‰∏ãÂìçÂ∫îÔºö</p>
<pre tabindex="0"><code>HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
Sec-WebSocket-Protocol: chat
</code></pre><h3 id="cors">CORS</h3>
<p>CORS ÔºàCross-Origin Resource SharingÔºâÊòØË∑®ÂüüËµÑÊ∫êÂàÜ‰∫´ÁöÑÁº©ÂÜôÔºåÂÆÉÊòØ W3C Ê†áÂáÜÔºåÊòØ Ë∑®Ê∫ê AJAX ËØ∑Ê±ÇÁöÑÊ†πÊú¨Ëß£ÂÜ≥ÂäûÊ≥ï„ÄÇÁõ∏ÊØî JSONP Âè™ËÉΩÂèë¬†<code>GET</code>¬†ËØ∑Ê±ÇÔºåCORS ÂÖÅËÆ∏‰ªª‰ΩïÁ±ªÂûãÁöÑËØ∑Ê±Ç„ÄÇ</p>
<h2 id="cors-ËØ¶Ëß£">CORS ËØ¶Ëß£</h2>
<p>CORS ÂÖÅËÆ∏ÊµèËßàÂô®ÂêëË∑®Ê∫êÊúçÂä°Âô®ÔºåÂèëÂá∫¬†<code>XMLHttpRequest</code>¬†ËØ∑Ê±ÇÔºå‰ªéËÄåÂÖãÊúç‰∫Ü AJAX Âè™ËÉΩÂêåÊ∫ê‰ΩøÁî®ÁöÑÈôêÂà∂„ÄÇÊé•‰∏ãÊù•ÔºåÊàë‰ª¨Êù•Ê∑±ÂÖ•ËÆ§ËØÜ‰∏ã CORS ÁöÑÂÜÖÈÉ®Êú∫Âà∂„ÄÇ</p>
<p>CORS ÈúÄË¶ÅÊµèËßàÂô®ÂíåÊúçÂä°Âô®ÂêåÊó∂ÊîØÊåÅÔºå Êï¥‰∏™ CORS ÈÄö‰ø°ËøáÁ®ãÔºåÈÉΩÊòØÊµèËßàÂô®Ëá™Âä®ÂÆåÊàê Ôºå‰∏çÈúÄË¶ÅÁî®Êà∑ÂèÇ‰∏é„ÄÇ</p>
<blockquote>
<p>ÂØπ‰∫éÂºÄÂèëËÄÖÊù•ËØ¥ÔºåCORS ÈÄö‰ø°‰∏éÂêåÊ∫êÁöÑ AJAX ÈÄö‰ø°Ê≤°ÊúâÂ∑ÆÂà´Ôºå‰ª£Á†ÅÂÆåÂÖ®‰∏ÄÊ†∑„ÄÇÊµèËßàÂô®‰∏ÄÊó¶ÂèëÁé∞ AJAX ËØ∑Ê±ÇËµÑÊ∫êÔºåÂ∞±‰ºöËá™Âä®Ê∑ªÂä†‰∏Ä‰∫õÈôÑÂä†ÁöÑÂ§¥‰ø°ÊÅØ ÔºåÊúâÊó∂Ëøò‰ºöÂ§öÂá∫‰∏ÄÊ¨°ÈôÑÂä†ÁöÑËØ∑Ê±ÇÔºå‰ΩÜÁî®Êà∑‰∏ç‰ºöÊúâÊÑüËßâ„ÄÇ</p>
</blockquote>
<blockquote>
<p>:: ÊµèËßàÂô®ÊòØ‰∏™Â•ΩÂÆø‰∏ªÔºåÁõ¥Êé•Â∏Æ‰Ω†ÔºàÁî®Êà∑ÔºâËß£ÂÜ≥‰∫Ü„ÄÇÊú¨Ë¥®‰∏äËÆ≤ÔºåCORS Âú®ÊµèËßàÂô®Á´ØËÄåË®ÄÔºåÂ∞±ÊòØÊµèËßàÂô®ÂØπÁî®Êà∑ÁöÑ AJAX ËØ∑Ê±ÇÁöÑ‚ÄúÂ∞ÅË£Ö‰ª£ÁêÜ‚Äù„ÄÇ</p>
</blockquote>
<p>Âõ†Ê≠§ÔºåÂÆûÁé∞ CORS ÈÄö‰ø°ÁöÑÂÖ≥ÈîÆÊòØÊúçÂä°Âô®ÔºåÂè™Ë¶ÅÊúçÂä°Âô®ÂÆûÁé∞‰∫Ü CORS Êé•Âè£ÔºåÂ∞±ÂèØ‰ª•Ë∑®Ê∫êÈÄö‰ø°„ÄÇ</p>
<h3 id="‰∏§ÁßçËØ∑Ê±Ç">‰∏§ÁßçËØ∑Ê±Ç</h3>
<p>ÊµèËßàÂô®Â∞Ü CORS ËØ∑Ê±ÇÂàÜ‰∏∫‰∏§Á±ªÔºö ÁÆÄÂçïËØ∑Ê±ÇÔºàsimple requestÔºâÂíåÈùûÁÆÄÂçïËØ∑Ê±ÇÔºànot-so-simple requestÔºâ„ÄÇ</p>
<p>Âè™Ë¶ÅÂêåÊó∂Êª°Ë∂≥‰ª•‰∏ã‰∏§Âú®Êù°‰ª∂ÔºåÂ∞±Â±û‰∫éÁÆÄÂçïËØ∑Ê±ÇÔºåÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>ËØ∑Ê±ÇÊñπÊ≥ïÊòØ‰ª•‰∏ã‰∏âÁßç‰πã‰∏ÄÔºö¬†<code>HEAD„ÄÅGET„ÄÅPOST</code>¬†Ôºõ</li>
<li>HTTP ÁöÑÂ§¥‰ø°ÊÅØ‰∏çË∂ÖÂá∫‰ª•‰∏ãÂá†ÁßçÂ≠óÊÆµÔºö</li>
</ul>
<pre tabindex="0"><code>- Accept
- Accept-Language
- Content-Language
- Last-Event-ID
- Content-Type
</code></pre><p>ÂÖ∂‰∏≠Ôºå¬†<code>Content-Type</code>¬†Âè™Èôê‰∫é‰∏â‰∏™ÂÄº¬†<code>application/x-www-form-urlencode„ÄÅmultipart/form-data„ÄÅtext/plain</code>¬†„ÄÇ</p>
<p>ËøôÊòØ‰∏∫‰∫ÜÂÖºÂÆπË°®ÂçïÔºåÂõ†‰∏∫ÂéÜÂè≤‰∏äË°®Âçï‰∏ÄÁõ¥ÂèØ‰ª•ÂèëÂá∫Ë∑®ÂüüËØ∑Ê±Ç„ÄÇAJAX ÁöÑË∑®ÂüüËÆæËÆ°Â∞±ÊòØÔºåÂè™Ë¶ÅË°®ÂçïÂèØ‰ª•ÂèëÔºåAJAX Â∞±ÂèØ‰ª•Áõ¥Êé•Âèë„ÄÇ</p>
<p>Ê≥®ÔºöÂá°ÊòØ‰∏çÂêåÊó∂Êª°Ë∂≥‰∏äÈù¢‰∏§‰∏™Êù°‰ª∂ÔºåÂ∞±Â±û‰∫éÈùûÁÆÄÂçïËØ∑Ê±ÇÔºåÊµèËßàÂô®ÂØπËøô‰∏§ÁßçËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÔºåÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ</p>
<h3 id="ÁÆÄÂçïËØ∑Ê±Ç">ÁÆÄÂçïËØ∑Ê±Ç</h3>
<p><strong>1. Âü∫Êú¨ÊµÅÁ®ã</strong></p>
<p>ÂØπ‰∫éÁÆÄÂçïËØ∑Ê±ÇÔºåÊµèËßàÂô®Áõ¥Êé•ÂèëÂá∫ CORS ËØ∑Ê±ÇÔºåÂÖ∑‰ΩìÊù•ËØ¥ÔºåÂ∞±ÊòØÂú®Â§¥‰ø°ÊÅØ‰∏≠ÔºåÂ¢ûÂä†‰∏Ä‰∏™¬†<code>Origin</code>¬†Â≠óÊÆµ„ÄÇ</p>
<p>Â¶Ç‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÔºåÊµèËßàÂô®ÂèëÁé∞ËøôÊ¨°Ë∑®Ê∫ê AJAX ËØ∑Ê±ÇÊòØÁÆÄÂçïËØ∑Ê±ÇÔºåÂ∞±Ëá™Âä®Âú®Â§¥‰ø°ÊÅØ‰∏≠ÔºåÊ∑ªÂä†‰∏Ä‰∏™¬†<code>Origin</code>¬†Â≠óÊÆµÔºö</p>
<pre tabindex="0"><code>GET /cors HTTP/1.1
Origin: http://api.bob.com ‚Üê
Host: api.alice.com
Accept-Language: en-US
Connection: keep-alive
User-Agent: Mozilla/5.0...
</code></pre><p>‰∏äÈù¢ÁöÑÂ§¥‰ø°ÊÅØ‰∏≠Ôºå¬†<code>Origin</code>¬†Â≠óÊÆµÁî®Êù•ËØ¥ÊòéÔºåÊú¨Ê¨°ËØ∑Ê±ÇÊù•Ëá™Âì™‰∏™Ê∫êÔºàÂçèËÆÆ+ÂüüÂêç+Á´ØÂè£ÔºâÔºåÊúçÂä°Âô®Ê†πÊçÆËøô‰∏™ÂÄºÂÜ≥ÂÆöÊòØÂê¶ÂêåÊÑèËøôÊ¨°ËØ∑Ê±Ç„ÄÇ</p>
<p>1.1 ‰∏çÂú®ÊúçÂä°Âô®ËÆ∏ÂèØËåÉÂõ¥ÂÜÖ</p>
<p>Â¶ÇÊûú¬†<code>Origin</code>¬†ÊåáÂÆöÁöÑÊ∫ê‰∏çÂú®ËÆ∏ÂèØËåÉÂõ¥ÂÜÖÔºåÊúçÂä°Âô®‰ºöËøîÂõû‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑ HTTP ÂõûÂ∫î„ÄÇÊµèËßàÂô®ÂèëÁé∞Ëøô‰∏™ÂõûÂ∫îÁöÑÂ§¥‰ø°ÊÅØÊ≤°ÊúâÂåÖÂê´¬†<code>Access-Control-Allow-Origin</code>¬†Â≠óÊÆµÔºåÂ∞±Áü•ÈÅìÂá∫Èîô‰∫ÜÔºå‰ªéÈù¢ÊäõÂá∫‰∏Ä‰∏™ÈîôËØØÔºåË¢´¬†<code>XMLHttpRequest</code>¬†ÁöÑ¬†<code>onerror</code>¬†ÂõûË∞ÉÂáΩÊï∞ÊçïËé∑„ÄÇ</p>
<p>Ê≥®ÔºöËøôÁßçÈîôËØØÊó†Ê≥ïÈÄöËøáÁä∂ÊÄÅÁ†ÅËØÜÂà´ÔºåÂõ†‰∏∫ HTTP ÂõûÂ∫îÁöÑÁä∂ÊÄÅÁ†ÅÂèØËÉΩÊòØ 200 „ÄÇ</p>
<p>1.2 Âú®ÊúçÂä°Âô®ËÆ∏ÂèØËåÉÂõ¥ÂÜÖ</p>
<p>Â¶ÇÊûú¬†<code>Origin</code>¬†ÊåáÂÆöÁöÑÂüüÂêçÂú®ËÆ∏ÂèØËåÉÂõ¥ÂÜÖÔºåÊúçÂä°Âô®ËøîÂõûÁöÑÂìçÂ∫îÔºå‰ºöÂ§öÂá∫Âá†‰∏™Â§¥‰ø°ÊÅØÂ≠óÊÆµÔºåÂ¶Ç‰∏ãÔºö</p>
<pre tabindex="0"><code>Access-Control-Allow-Origin: http://api.bob.com
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: FooBar
Content-Type: text/html; charset=utf-8
</code></pre><p>‰∏äÈù¢ÁöÑ‰ø°ÊÅØÂ§¥‰∏≠ÔºåÊúâ‰∏â‰∏™‰∏é CORS ËØ∑Ê±ÇÁõ∏ÂÖ≥ÁöÑÂ≠óÊÆµÔºåÈÉΩ‰ª•¬†<code>Access-Control-</code>¬†ÂºÄÂ§¥„ÄÇ</p>
<p>Ôºà1ÔºâAccess-Control-Allow-Origin</p>
<p>ËØ•Â≠óÊÆµÊòØÂøÖÈ°ªÁöÑÔºåÂÆÉÁöÑÂÄºË¶Å‰πàÊòØËØ∑Ê±ÇÊó∂¬†<code>Origin</code>¬†Â≠óÊÆµÁöÑÂÄºÔºåË¶Å‰πàÊòØ‰∏Ä‰∏™¬†<code>*</code>¬†ÔºàË°®Á§∫Êé•Âèó‰ªªÊÑèÂüüÂêçÁöÑËØ∑Ê±ÇÔºâ„ÄÇ</p>
<p>Ôºà2ÔºâAccess-Control-Allow-Credentials</p>
<p>ËØ•Â≠óÊÆµÂèØÈÄâÔºåÂÆÉÁöÑÂÄºÊòØ‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåË°®Á§∫ÊòØÂê¶ÂÖÅËÆ∏ÂèëÈÄÅ Cookie „ÄÇ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåCookie ‰∏çÂåÖÊã¨Âú® CORS ËØ∑Ê±Ç‰πã‰∏≠ÔºåËÆæ‰∏∫¬†<code>true</code>¬†ÔºåÂç≥Ë°®Á§∫ÊúçÂä°Âô®ÊòéÁ°ÆËÆ∏ÂèØ Cookie ÂèØ‰ª•ÂåÖÂê´Âú®ËØ∑Ê±Ç‰∏≠Ôºå‰∏ÄËµ∑ÂèëÁªôÊúçÂä°Âô®„ÄÇ</p>
<p>*Ê≥®ÔºöÂÖ∂ÂÆûÔºåËøô‰∏™ÂÄº‰πüÂè™ËÉΩËÆæ‰∏∫¬†<code>true</code>¬†ÔºåÂ¶ÇÊûúÊúçÂä°Âô®‰∏çË¶ÅÊµèËßàÂô®ÂèëÈÄÅ Cookie ÔºåÂà†Èô§ËØ•Â≠óÊÆµÂç≥ÂèØ„ÄÇ</p>
<p>Ôºà3ÔºâAccess-Control-Expose-Headers</p>
<p>ËØ•Â≠óÊÆµÂèØÈÄâÔºåCORS ËØ∑Ê±ÇÊó∂Ôºå¬†<code>XMLHttpRequest</code>¬†ÂØπË±°ÁöÑ¬†<code>getResponseHeader()</code>¬†ÊñπÊ≥ïÂè™ËÉΩÊãøÂà∞ 6 ‰∏™Âü∫Êú¨Â≠óÊÆµÔºö¬†<code>Cache-Control„ÄÅContent-Language„ÄÅContent-Type„ÄÅExpires„ÄÅLast-Modified„ÄÅPragma</code>¬†„ÄÇÂ¶ÇÊûúÊÉ≥ÊãøÂà∞ÂÖ∂‰ªñÂ≠óÊÆµÔºåÂ∞±ÂøÖÈ°ªÂú®¬†<code>Access-Control-Expose-Headers</code>¬†ÈáåÈù¢ÊåáÂÆö„ÄÇÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Â∞±ÊåáÂÆö‰∫Ü¬†<code>FooBar</code>¬†ÔºåÂ¶ÇÊ≠§‰æøÂèØ‰ª•ÈÄöËøá¬†<code>getResponseHeader('FooBar')</code>¬†Êù•ËøîÂõû¬†<code>FooBar</code>¬†Â≠óÊÆµÁöÑÂÄº„ÄÇ</p>
<p><strong>2. withCredentials Â±ûÊÄß</strong></p>
<p>‰∏äÈù¢ËØ¥Âà∞ÔºåCORS ËØ∑Ê±ÇÈªòËÆ§‰∏çÂèëÈÄÅ Cookie Âíå HTTP ËÆ§ËØÅ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúË¶ÅÊää Cookie ÂèëÂà∞ÊúçÂä°Âô®Ôºå‰∏ÄÊñπÈù¢Ë¶ÅÊúçÂä°Âô®ÂêåÊÑèÔºåÊåáÂÆö¬†<code>Access-Control-Allow-Credentials</code>¬†Â≠óÊÆµÔºö</p>
<pre tabindex="0"><code>Access-Control-Allow-Credentials: true
</code></pre><p>Âè¶‰∏ÄÊñπÈù¢ÔºåÂºÄÂèëËÄÖÂøÖÈ°ªÂú® AJAX ËØ∑Ê±Ç‰∏≠ÊâìÂºÄ¬†<code>withCredentials</code>¬†Â±ûÊÄßÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> xhr <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> XMLHttpRequest();
</span></span><span style="display:flex;"><span>xhr.withCredentials <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">true</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âê¶ÂàôÔºåÂç≥‰ΩøÊúçÂä°Âô®ÂêåÊÑèÂèëÈÄÅ Cookie ÔºåÊµèËßàÂô®‰πü‰∏ç‰ºöÂèëÈÄÅ„ÄÇÊàñËÄÖÔºåÊúçÂä°Âô®Ë¶ÅÊ±ÇËÆæÁΩÆ Cookie ÔºåÊµèËßàÂô®‰πü‰∏ç‰ºöÂ§ÑÁêÜ„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÂ¶ÇÊûúÁúÅÁï•¬†<code>withCredentials</code>¬†ËÆæÁΩÆÔºåÊúâÁöÑÊµèËßàÂô®ËøòÊòØ‰ºö‰∏ÄËµ∑ÂèëÈÄÅ Cookie „ÄÇËøôÊó∂ÔºåÂèØ‰ª•ÊòæÂºèÂÖ≥Èó≠¬†<code>withCredentials</code>¬†Ôºö</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>xhr.withCredentials <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúË¶ÅÂèëÈÄÅ Cookie Ôºå¬†<code>Access-Control-Allow-Origin</code>¬†Â∞±‰∏çËÉΩËÆæ‰∏∫ÊòüÂè∑ÔºåÂøÖÈ°ªÊåáÂÆöÁöÑ„ÄÅ‰∏éËØ∑Ê±ÇÁΩëÈ°µ‰∏ÄËá¥ÁöÑÂüüÂêç„ÄÇÂêåÊó∂ÔºåCookie ‰æùÁÑ∂ÈÅµÂæ™ÂêåÊ∫êÊîøÁ≠ñÔºåÂè™ÊúâÊúçÂä°Âô®ÂüüÂêçËÆæÁΩÆÁöÑ Cookie Êâç‰ºö‰∏ä‰º†ÔºåÂÖ∂‰ªñÂüüÂêçÁöÑ Cookie Âπ∂‰∏ç‰ºö‰∏ä‰º†Ôºå‰∏îÔºàË∑®Ê∫êÔºâÂéüÁΩëÈ°µ‰ª£Á†Å‰∏≠ÁöÑ¬†<code>document.cookie</code>¬†‰πüÊó†Ê≥ïËØªÂèñÊúçÂä°Âô®ÂüüÂêç‰∏ãÁöÑ Cookie „ÄÇ</p>
<h3 id="ÈùûÁÆÄÂçïËØ∑Ê±Ç">ÈùûÁÆÄÂçïËØ∑Ê±Ç</h3>
<ol>
<li>È¢ÑÊ£ÄËØ∑Ê±Ç</li>
</ol>
<p>ÈùûÁÆÄÂçïËØ∑Ê±ÇÊòØÈÇ£ÁßçÂØπÊúçÂä°Âô®ÊúâÁâπÊÆäË¶ÅÊ±ÇÁöÑËØ∑Ê±ÇÔºåÊØîÂ¶ÇËØ∑Ê±ÇÊñπÊ≥ïÊòØ¬†<code>PUT</code>¬†Êàñ¬†<code>DELETE</code>¬†ÔºåÊàñËÄÖ¬†<code>Content-Type</code>¬†Â≠óÊÆµÁöÑÁ±ªÂûãÊòØ¬†<code>application/json</code>¬†„ÄÇ</p>
<p>ÈùûÁÆÄÂçïËØ∑Ê±ÇÁöÑ CORS ËØ∑Ê±ÇÔºå‰ºöÂú®Ê≠£ÂºèÈÄö‰ø°‰πãÂâçÔºåÂ¢ûÂä†‰∏ÄÊ¨° HTTP Êü•ËØ¢ËØ∑Ê±ÇÔºåÁß∞‰∏∫È¢ÑÊ£ÄËØ∑Ê±ÇÔºàprefightÔºâ„ÄÇ</p>
<p>ÊµèËßàÂô®ÂÖàËØ¢ÈóÆÊúçÂä°Âô®ÔºåÂΩìÂâçÁΩëÈ°µÊâÄÂú®ÁöÑÂüüÂêçÊòØÂê¶Âú®ÊúçÂä°Âô®ÁöÑËÆ∏ÂèØÂêçÂçï‰πã‰∏≠Ôºå‰ª•ÂèäÂèØ‰ª•‰ΩøÁî®Âì™‰∫õ HTTP Âä®ËØçÂíåÂ§¥‰ø°ÊÅØÂ≠óÊÆµ„ÄÇÂè™ÊúâÂæóÂà∞ËÇØÂÆöÁ≠îÂ§çÔºåÊµèËßàÂô®Êâç‰ºöÂèëÂá∫Ê≠£ÂºèÁöÑ¬†<code>XMLHttpRequest</code>¬†ËØ∑Ê±ÇÔºåÂê¶ÂàôÂ∞±Êä•Èîô„ÄÇ</p>
<p>Êù•Áúã‰∏ÄÊÆµÊµèËßàÂô®ÁöÑ JavaScript ËÑöÊú¨„ÄÇ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> url <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;http://api.alice.com/cors&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> xhr <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> XMLHttpReuqest();
</span></span><span style="display:flex;"><span>xhr.open(<span style="color:#d14">&#39;PUT&#39;</span>, url, <span style="color:#000;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>xhr.setRequestHeader(<span style="color:#d14">&#39;X-Custom-Header&#39;</span>, <span style="color:#d14">&#39;value&#39;</span>);
</span></span><span style="display:flex;"><span>xhr.send();
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåHTTP ËØ∑Ê±ÇÁöÑÊñπÊ≥ïÊòØ¬†<code>PUT</code>¬†ÔºåÂπ∂‰∏îÂèëÈÄÅ‰∏Ä‰∏™Ëá™ÂÆö‰πâÂ§¥‰ø°ÊÅØ¬†<code>X-Custom-Header</code>¬†„ÄÇ</p>
<p>ÊµèËßàÂô®ÂèëÁé∞ÔºåËøôÊòØ‰∏Ä‰∏™ÈùûÁÆÄÂçïËØ∑Ê±ÇÔºåÂ∞±Ëá™Âä®ÂèëÂá∫‰∏Ä‰∏™‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±ÇÔºåË¶ÅÊ±ÇÊúçÂä°Âô®Á°ÆËÆ§ÂèØ‰ª•ËøôÊ†∑ËØ∑Ê±Ç„ÄÇ‰∏ãÈù¢ÊòØËøô‰∏™‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±ÇÁöÑ HTTP Â§¥‰ø°ÊÅØÔºö</p>
<pre tabindex="0"><code>OPTIONS /cors HTTP/1.1
Origin: http://api.bob.com
Access-Control-Request-Method: PUT
Access-Control-Request-Headers: X-Custom-Header
Host: api.alice.com
Accept-Language: en-US
Connection: keep-alive
User-Agent: Mozilla/5.0...
</code></pre><p>‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±ÇÁî®ÁöÑËØ∑Ê±ÇÊñπÊ≥ïÊòØ¬†<code>OPTIONS</code>¬†ÔºåË°®Á§∫Ëøô‰∏™ËØ∑Ê±ÇÊòØÁî®Êù•ËØ¢ÈóÆÁöÑ„ÄÇÂ§¥‰ø°ÊÅØÈáåÈù¢ÔºåÂÖ≥ÈîÆÂ≠óÊÆµÊòØ¬†<code>Origin</code>¬†ÔºåË°®Á§∫ËØ∑Ê±ÇÊù•Ëá™Âì™‰∏™Ê∫ê„ÄÇ</p>
<p>Èô§‰∫Ü¬†<code>Origin</code>¬†Â≠óÊÆµÔºå‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±ÇÁöÑÂ§¥‰ø°ÊÅØÂåÖÊã¨‰∏§‰∏™ÁâπÊÆäÂ≠óÊÆµ„ÄÇ</p>
<p>Ôºà1ÔºâAccess-Control-Request-Method</p>
<p>ËØ•Â≠óÊÆµÊòØÂøÖÈ°ªÁöÑÔºåÁî®Êù•ÂàóÂá∫ÊµèËßàÂô®ÁöÑ CORS ËØ∑Ê±Ç‰ºöÁî®Âà∞Âì™‰∫õ HTTP ÊñπÊ≥ïÔºå‰∏ä‰æãÊòØ¬†<code>PUT</code>¬†„ÄÇ</p>
<p>Ôºà2ÔºâAccess-Control-Request-Headers</p>
<p>ËØ•Â≠óÊÆµÊòØ‰∏Ä‰∏™ÈÄóÂè∑ÂàÜÈöîÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÊåáÂÆöÊµèËßàÂô® CORS ËØ∑Ê±ÇÈ¢ùÂ§ñÂèëÈÄÅÁöÑÂ§¥‰ø°ÊÅØÂ≠óÊÆµÔºå‰∏ä‰æãÊòØ¬†<code>X-Custom-Header</code>¬†„ÄÇ</p>
<ol start="2">
<li>È¢ÑÊ£ÄËØ∑Ê±ÇÁöÑÂõûÂ∫î</li>
</ol>
<p>ÊúçÂä°Âô®Êî∂Âà∞‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±Ç‰ª•ÂêéÔºåÊ£ÄÊü•‰∫Ü¬†<code>Origin„ÄÅAccess-Control-Request-Method</code>¬†Âíå¬†<code>Access-Control-Request-Headers</code>¬†Â≠óÊÆµ‰ª•ÂêéÔºåÁ°ÆËÆ§ÂÖÅËÆ∏Ë∑®Ê∫êËØ∑Ê±ÇÔºåÂ∞±ÂèØ‰ª•ÂÅöÂá∫ÂèçÂ∫î„ÄÇ</p>
<pre tabindex="0"><code>HTTP/1.1 200 OK
Date: Mon, 01 Dec 2008 01:15:39 GMT
Server: Apache/2.0.61 (Unix)
Access-Control-Allow-Origin: http://api.bob.com
Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: X-Custom-Header
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Content-Length: 0
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Content-Type: text/plain
</code></pre><p>‰∏äÈù¢ÁöÑ HTTP ÂõûÂ∫î‰∏≠ÔºåÂÖ≥ÈîÆÁöÑÊòØ¬†<code>Access-Control-Allow-Origin</code>¬†Â≠óÊÆµÔºåË°®Á§∫¬†<code>http://api.bob.com</code>¬†ÂèØ‰ª•ËØ∑Ê±ÇÊï∞ÊçÆ„ÄÇËØ•Â≠óÊÆµÂèØ‰πüÂèØ‰ª•ËÆæ‰∏∫ÊòüÂè∑ÔºåË°®Á§∫ÂêåÊÑè‰ªªÊÑèË∑®Ê∫êËØ∑Ê±Ç„ÄÇ</p>
<pre tabindex="0"><code>Access-Control-Allow-Origin: *
</code></pre><p>Â¶ÇÊûúÊúçÂä°Âô®Âê¶ÂÆö‰∫Ü‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±ÇÔºå‰ºöËøîÂõû‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑ HTTP ÂõûÂ∫îÔºå‰ΩÜÊòØÊ≤°Êúâ‰ªª‰Ωï CORS Áõ∏ÂÖ≥ÁöÑÂ§¥‰ø°ÊÅØÂ≠óÊÆµ„ÄÇËøôÊó∂ÔºåÊµèËßàÂô®Â∞±‰ºöËÆ§ÂÆöÔºåÊúçÂä°Âô®‰∏çÂêåÊÑè‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±ÇÔºåÂõ†Ê≠§Ëß¶Âèë‰∏Ä‰∏™ÈîôËØØÔºåË¢´¬†<code>XMLHttpRequest</code>¬†ÂØπË±°ÁöÑ¬†<code>onerror</code>¬†ÂõûË∞ÉÂáΩÊï∞ÊçïËé∑ÔºåÊéßÂà∂Âè∞‰ºöÊâìÂç∞Âá∫Â¶Ç‰∏ãÁöÑÊä•Èîô‰ø°ÊÅØÔºö</p>
<pre tabindex="0"><code>XMLHttpRequest cannot load http://api.alice.com.
Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin.
</code></pre><p>ÊúçÂä°Âô®ÂõûÂ∫îÁöÑÂÖ∂‰ªñ CORS Áõ∏ÂÖ≥Â≠óÊÆµÂ¶Ç‰∏ãÔºö</p>
<pre tabindex="0"><code>Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: X-Custom-Header
Access-Control-Allow-Credentials: true
Access-Control-Max-Age: 1728000
</code></pre><p>Ôºà1ÔºâAccess-Control-Allow-Methods</p>
<p>ËØ•Â≠óÊÆµÂøÖÈúÄÔºåÂÆÉÁöÑÂÄºÊòØÈÄóÂè∑ÂàÜÈöîÁöÑ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåË°®ÊòéÊúçÂä°Âô®ÊîØÊåÅÁöÑÊâÄÊúâË∑®ÂüüËØ∑Ê±ÇÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>*Ê≥®ÔºöËøîÂõûÁöÑÊòØÊâÄÊúâÊîØÊåÅÁöÑÊñπÊ≥ïÔºåËÄå‰∏çÂçïÊòØÊµèËßàÂô®ËØ∑Ê±ÇÁöÑÈÇ£‰∏™ÊñπÊ≥ïÔºåËøôÊòØ‰∏∫‰∫ÜÈÅøÂÖçÂ§öÊ¨°‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±Ç„ÄÇ</p>
<p>Ôºà2ÔºâAccess-Control-Allow-Headers</p>
<p>Â¶ÇÊûúÊµèËßàÂô®ËØ∑Ê±ÇÂåÖÊã¨¬†<code>Access-Control-Request-Headers</code>¬†Â≠óÊÆµÔºåÂàô¬†<code>Access-Control-Allow-Headers</code>¬†Â≠óÊÆµÊòØÂøÖÈúÄÁöÑ„ÄÇÂÆÉ‰πüÊòØ‰∏Ä‰∏™ÈÄóÂè∑ÂàÜÈöîÁöÑÂ≠óÁ¨¶‰∏≤ÔºåË°®ÊòéÊúçÂä°Âô®ÊîØÊåÅÁöÑÊâÄÊúâÂ§¥‰ø°ÊÅØÂ≠óÊÆµÔºå‰∏çÈôê‰∫éÊµèËßàÂô®Âú®‚ÄúÈ¢ÑÊ£Ä‚Äù‰∏≠ËØ∑Ê±ÇÁöÑÂ≠óÊÆµ„ÄÇ</p>
<p>Ôºà3ÔºâAccess-Control-Allow-Credentials</p>
<p>ËØ•Â≠óÊÆµ‰∏éÁÆÄÂçïËØ∑Ê±ÇÊó∂ÁöÑÂê´‰πâÁõ∏Âêå„ÄÇ</p>
<p>Ôºà4ÔºâAccess-Control-Max-Age</p>
<p>ËØ•Â≠óÊÆµÂèØÈÄâÔºåÁî®Êù•ÊåáÂÆöÊú¨Ê¨°È¢ÑÊ£ÄËØ∑Ê±ÇÁöÑÊúâÊïàÊúüÔºåÂçï‰Ωç‰∏∫Áßí„ÄÇ‰∏äÈù¢ÁªìÊûú‰∏≠ÔºåÊúâÊïàÊúüÊòØ 20 Â§©Ôºà1728000 ÁßíÔºâÔºåÂç≥ÂÖÅËÆ∏ÁºìÂ≠òËØ•Êù°ÂõûÂ∫î 1728000 ÁßíÔºåÂú®‰∫õÊúüÈó¥Ôºå‰∏çÁî®ÂèëÂá∫Âè¶‰∏ÄÊù°È¢ÑÊ£ÄËØ∑Ê±Ç„ÄÇ</p>
<ol>
<li>ÊµèËßàÂô®ÁöÑÊ≠£Â∏∏ËØ∑Ê±ÇÂíåÂõûÂ∫î</li>
</ol>
<p>‰∏ÄÊó¶ÊúçÂä°Âô®ÈÄöËøá‰∫Ü‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±ÇÔºå‰ª•ÂêéÊØèÊ¨°ÊµèËßàÂô®Ê≠£Â∏∏ÁöÑ CORS ËØ∑Ê±ÇÔºåÂ∞±ÈÉΩË∑üÁÆÄÂçïËØ∑Ê±Ç‰∏ÄÊ†∑Ôºå‰ºöÊúâ‰∏Ä‰∏™¬†<code>Origin</code>¬†Â§¥‰ø°ÊÅØÂ≠óÊÆµ„ÄÇÊúçÂä°Âô®ÁöÑÂõûÂ∫îÔºå‰πüÈÉΩ‰ºöÊúâ‰∏Ä‰∏™¬†<code>Access-Control-Allow-Origin</code>¬†Â§¥‰ø°ÊÅØÂ≠óÊÆµ„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØ‚ÄúÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±Ç‰πãÂêéÔºåÊµèËßàÂô®ÁöÑÊ≠£Â∏∏ CORS ËØ∑Ê±ÇÔºö</p>
<pre tabindex="0"><code>PUT /cors HTTP/1.1
Origin: http://api.bob.com
Host: api.alice.com
X-Custom-Header: value
Accept-Language: en-US
Connection: keep-alive
User-Agent: Mozilla/5.0...
</code></pre><p>‰∏äÈù¢Â§¥‰ø°ÊÅØÁöÑ¬†<code>Origin</code>¬†Â≠óÊÆµÊòØÊµèËßàÂô®Ëá™Âä®Ê∑ªÂä†ÁöÑ„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØÊúçÂä°Âô®Ê≠£Â∏∏ÁöÑÂõûÂ∫îÔºö</p>
<pre tabindex="0"><code>Access-Control-Allow-Origin: http://api.bob.com
Content-Type: text/html; charset=utf-8
</code></pre><p>‰∏äÈù¢Â§¥‰ø°ÊÅØ‰∏≠Ôºå¬†<code>Access-Control-Allow-Origin</code>¬†Â≠óÊÆµÊòØÊØèÊ¨°ÂõûÂ∫îÈÉΩÂøÖÂÆöÂåÖÂê´ÁöÑ„ÄÇ</p>
    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=">
            

        </a>

        
        <a href="/about" target="_blank">
            
            Â∞ÜÂñúÊ¨¢ÁöÑ‰∏ÄÂàáÁïôÂú®Ë∫´ËæπÔºåËøô‰æøÊòØÂä™ÂäõÁöÑÊÑè‰πâ
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">üïäÔ∏è</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.69); 
                backdrop-filter: saturate(180%) blur(6px);
            
            "></div>
    </body>
</html>
