<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="React - https://aituyaa.com/react/">
    <meta name="author" content="Jack - https://aituyaa.com/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>React</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://aituyaa.com/style.min.7a1211384e00d894dc501a9708ae5fb349825c010d5348b62a8727d135f41615.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        
        <div class="cool-before" style="background: url('/imgs/bg/color.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">React</h1>
    
        
        
            <div id="toc">📜</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    <div class="rel">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <div class="curtag-desc">
            <a href="https://aituyaa.com/tags/javascript/"><img src="/imgs/icons/tag.svg" width="16" /> 相关文章：JavaScript <sup>24</sup></a>
        </div>

        <div class="curtag-post">
            
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/ajax/">Ajax</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/callapply-%E5%92%8C-bind/">call、apply 和 bind</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/canvas/">Canvas</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/devmaps/frontend/">Frontend</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/js-%E4%B8%AD%E7%9A%84%E6%8B%96%E6%94%BE/">JS 中的拖放</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/js-%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E6%91%98%E5%BD%95/">JS 高级程序设计·摘录</a>
                </div>
                
                
            
            
                <div class="curtag-post-item curtag-post-item--active">
                    <a href="https://aituyaa.com/react/">React</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/react-%E5%9F%BA%E7%A1%80%E8%84%9A%E6%89%8B%E6%9E%B6%E7%A4%BA%E4%BE%8B/">React 基础脚手架示例</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/source-map/">Source Map</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/typescript-%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/">TypeScript 那些事儿</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/web-%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E9%9A%8F%E6%83%B3/">Web 开发相关体系结构随想</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E5%85%B3%E4%BA%8E-fetch/">关于 fetch</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E5%85%B3%E4%BA%8E-promise/">关于 Promise</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E5%89%8D%E7%AB%AF%E6%B5%85%E8%B0%88/">前端浅谈</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%96%87%E4%BB%B6%E8%BD%AC%E6%8D%A2/">文件转换</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/">模块化编程</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84%E5%B0%BA%E5%AF%B8%E5%A4%A7%E5%B0%8F%E5%92%8C%E4%BD%8D%E7%BD%AE/">浏览器中的尺寸大小和位置</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B/">浏览器的渲染过程</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F/">滚动条样式</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E7%94%9F%E6%88%90%E5%99%A8/">生成器</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84%E9%94%9A%E7%82%B9%E8%B7%B3%E8%BD%AC/">网页中的锚点跳转</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E8%B7%A8%E5%9F%9F/">跨域</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://aituyaa.com/%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/">防抖与节流</a>
                </div>
                
                
        </div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2023-05-25&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2024-08-13&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            7872 字</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            16 分钟</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
			<a href="/tags/javascript">JavaScript</a>
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#新文档">新文档</a>
      <ul>
        <li><a href="#老生常谈">老生常谈</a></li>
        <li><a href="#再谈-react-哲学">再谈 React 哲学</a></li>
      </ul>
    </li>
    <li><a href="#旧文档">旧文档</a>
      <ul>
        <li><a href="#jsx-简介">JSX 简介</a></li>
        <li><a href="#元素渲染">元素渲染</a></li>
        <li><a href="#组件--props">组件 &amp; Props</a></li>
        <li><a href="#state--生命周期">State &amp; 生命周期</a></li>
        <li><a href="#事件处理">事件处理</a></li>
        <li><a href="#条件渲染">条件渲染</a></li>
        <li><a href="#列表--key">列表 &amp; Key</a></li>
        <li><a href="#表单">表单</a></li>
        <li><a href="#状态提升">状态提升</a></li>
        <li><a href="#组合-vs-继承">组合 vs 继承</a></li>
        <li><a href="#react-哲学">React 哲学</a></li>
      </ul>
    </li>
    <li><a href="#hook">HOOK</a></li>
    <li><a href="#相关技术栈">相关技术栈</a>
      <ul>
        <li><a href="#样式">样式</a></li>
        <li><a href="#路由">路由</a></li>
        <li><a href="#状态管理">状态管理</a></li>
        <li><a href="#异步请求">异步请求</a></li>
      </ul>
    </li>
    <li><a href="#示例">示例</a></li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <p>📔 <a href="https://zh-hans.react.dev/learn">快速入门 – React 中文文档</a></p>
<blockquote>
<p>具体安装及引入细节，请直接参考官方文档。</p>
</blockquote>
<blockquote>
<p>:: React 的出新文档了，内容的组织结构也有所变化，整体来说更加突出函数式组件的作用了，毕竟有了 Hooks 嘛~ 来一个新的章节来摘录一下，准备在新的项目中应用 React ，反正用什么我说了算，哈哈~ ↗️ 「 [[#新文档]] 」</p>
</blockquote>
<p>React 是一个用于构建用户界面的 JavaScript 库，你可以用它给简单的 HTML 页面增加一点交互，也可以开始一个完全由 React 驱动的复杂应用。</p>
<p><code>&gt; 对的，它只是一个 UI 库而已 ！！！</code></p>
<p>在新的项目中，强烈建议直接使用 Vite 来创建你的应用 - <code>npx create vite</code> ，如下：</p>
<pre tabindex="0"><code>PS D:\WP&gt; npm create vite

&gt; npx
&gt; create-vite

√ Project name: ... my-react-app
√ Select a framework: » React
√ Select a variant: » JavaScript + SWC
...
</code></pre><p>当然，你也可以继续使用基于 webpack 的打包方式，但随着你的项目越来越大，其编译速度会越来越慢。</p>
<p>简单的就不说了，直接来看一下 React 团队推荐的创建 SPA （单页面，Single Page App）的工具链 - <a href="https://react.docschina.org/docs/create-a-new-react-app.html#create-react-app">Create React App</a> 。</p>
<p>要创建项目，请执行：</p>
<pre tabindex="0"><code>npx create-react-app my-app
cd my-app
npm start
</code></pre><p>Create React App 不会处理后端逻辑或操纵数据库；它只是创建一个前端构建流水线（build pipeline），所以你可以使用它来配合任何你想使用的后端。它在内部使用 Babel 和 webpack，但你无需了解它们的任何细节。当然，关于它，你肯定想了解更多，请参考 <a href="https://facebook.github.io/create-react-app/">用户指南</a> 。</p>
<p>如果你倾向于从头开始打造你自己的 JavaScript 工具链，可以 <a href="https://blog.usejournal.com/creating-a-react-app-from-scratch-f3c693b84658">查看这个指南</a>，它重新创建了一些 Create React App 的功能。</p>
<h2 id="新文档">新文档</h2>
<blockquote>
<p>:: 由于 Hook 的引入，在新文档中你基本上看不到 <code>class</code> 组件的写法了。JavaScript 的面向对象应用并不多，回归“函数”是一个非常明智的选择。</p>
</blockquote>
<h3 id="老生常谈">老生常谈</h3>
<p>React 组件是 <strong>返回标签</strong> 的 JavaScript 函数。React 组件必须以<strong>大写字母开头</strong>，而 HTML 标签则必须是小写字母。</p>
<blockquote>
<p>:: class 的写法基本上被束之高阁了~</p>
</blockquote>
<p>返回标签？什么标签？JSX 喽。</p>
<p>需要注意的是，你的组件 <strong>不能返回多个 JSX 标签</strong>，你必须将它们包裹到一个共享的父级中，，比如 <code>&lt;div&gt;...&lt;/div&gt;</code> 或使用空的 <code>&lt;&gt;...&lt;/&gt;</code> 包裹。</p>
<p>在 React 中，你可以使用 <code>className</code> 来指定一个 CSS 的 class ，但它并没有规定你如何添加 CSS 文件。</p>
<p>JSX 会让你把标签放到 JavaScript 中，而大括号会让你 “回到” JavaScript 中。</p>
<blockquote>
<p>:: 这一点做的就比较好，只有一个 <code>{...}</code> 搞定一切，统一无负担。</p>
</blockquote>
<p>至于条件渲染和列表渲染，则直接使用 javascript 本身的能力即可。</p>
<p>你可以通过在组件中声明 <strong>事件处理</strong> 函数来响应事件，需要注意的是，不要 <strong>调用</strong> 事件处理函数（即不要在函数名后加小括号）：你只需 <strong>把函数传递给事件</strong> 即可。</p>
<p>React 引入 <code>useState</code> 这个内置 Hook ，用来初始化和更新组件状态 state 。多次渲染同一个组件，每个组件都会拥有自己的 state。</p>
<p>💡 你只能在你的组件（或其他 Hook）的 <strong>顶层</strong> 调用 Hook。</p>
<p>老样子，我们可以通过状态容提升来实现组件状态共享。当然，后续我们会有另外的方式。</p>
<h3 id="再谈-react-哲学">再谈 React 哲学</h3>
<blockquote>
<p>React 可以改变你对可见设计和应用构建的思考。当你使用 React 构建用户界面时，你首先会把它分解成一个个 <strong>组件</strong>，然后，你需要把这些组件连接在一起，使数据流经它们。</p>
</blockquote>
<p><strong>步骤一：将 UI 拆解为组件层级结构</strong></p>
<p>一开始，在绘制原型中的每个组件和子组件周围绘制盒子并命名它们。</p>
<p>![[assets/Pasted image 20240724152435.png|525]]</p>
<p>现在你已经在原型中辨别了组件，并将它们转化为了层级结构。</p>
<p>![[assets/Pasted image 20240724153059.png]]</p>
<p><strong>步骤二：使用 React 构建一个静态版本</strong></p>
<p>先构建一个静态版本，然后再一个个添加交互。构建一个静态版本需要写大量的代码，并不需要什么思考; 但添加交互需要大量的思考，却不需要大量的代码。</p>
<blockquote>
<p>:: 这是一种很不错的方式，让大脑的线程不至于来回切换。</p>
</blockquote>
<p><strong>步骤三：找出 UI 精简且完整的 state 表示</strong></p>
<p>考虑将 state 作为应用程序需要记住改变数据的最小集合，即组织 state 最重要的一条原则是保持它 DRY（不要自我重复）。</p>
<p>如何判断哪些是 state ，哪些不是呢？</p>
<ul>
<li>随着时间推移 <strong>保持不变</strong>？如此，便不是 state。</li>
<li>通过 props <strong>从父组件传递</strong>？如此，便不是 state。</li>
<li>是否可以基于已存在于组件中的 state 或者 props <strong>进行计算</strong>？如此，它肯定不是state！</li>
</ul>
<p><strong>步骤四：⭐ 验证 state 应该被放置在哪里</strong></p>
<p><strong>步骤五：添加反向数据流</strong></p>
<blockquote>
<p>:: 原型分组件，组件定层级，数据流其中。</p>
</blockquote>
<h2 id="旧文档">旧文档</h2>
<p>i.e. 核心概念</p>
<p>老规矩，上 <code>&quot;Hello World&quot;</code> 😂</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// &lt;div id=&#34;root&#34;&gt;&lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> &lt;<span style="color:#000080">h1</span>&gt;Hello, world<span style="color:#000;font-weight:bold">!</span>&lt;/<span style="color:#000080">h1</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  element,
</span></span><span style="display:flex;"><span>  <span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>它将在页面上展示一个 “Hello, world!” 的标题。不要着急，马上你就明白它的工作原理了！</p>
<h3 id="jsx-简介">JSX 简介</h3>
<p>再观察一下上面的例子，这是什么？</p>
<pre tabindex="0"><code>const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;;
</code></pre><p><code>&gt; 怎么把 DOM 元素直接赋给了一个变量 ❓</code></p>
<p>这个有趣的标签语法既不是字符串也不是 HTML。它被称为 JSX，是一个 JavaScript 的语法扩展。</p>
<p>JSX 可以生成 React “元素”，它其实一个表达式，在编译（通过 Babel）之后，会被转为普通 JavaScript 函数（<code>React.createElement()</code>）调用，并且对其取值后得到 JavaScript 对象。</p>
<p>JSX 的语法格式十分简单！上 🌰</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> name <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;Josh Perez&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> (
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#000080">h1</span>&gt;
</span></span><span style="display:flex;"><span>		Hello, {name}
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#000080">h1</span>&gt;
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> &lt;<span style="color:#000080">img</span> <span style="color:#008080">src</span><span style="color:#000;font-weight:bold">=</span>{user.avatarUrl}&gt;&lt;/<span style="color:#000080">img</span>&gt;;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>在 JSX 语法中，你可以在大括号内放置任何有效的 JavaScript 表达式。</strong></p>
<p>只需要注意：</p>
<ul>
<li>尽量将内容包裹在括号中，以避免多行书写时遇到自动插入分号陷阱；</li>
<li>在属性中嵌入 JavaScript 表达式时，不要在大括号外面加上引号；</li>
<li>使用 camelCase（小驼峰命名）来定义属性的名称，而不使用 HTML 属性名称的命名约定。</li>
</ul>
<p>OK，这就是 JSX ，再来一个例子看看它的具体转译过程！</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 我们用 JSX 是这样写的
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> (
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#000080">h1</span> <span style="color:#008080">className</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;greeting&#34;</span>&gt;
</span></span><span style="display:flex;"><span>		Hello, world<span style="color:#000;font-weight:bold">!</span>
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#000080">h1</span>&gt;
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 被 Babel 转译为 React.crateElement() 调用
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> React.createElement(
</span></span><span style="display:flex;"><span>	<span style="color:#d14">&#39;h1&#39;</span>,
</span></span><span style="display:flex;"><span>	{className<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;greeting&#39;</span>},
</span></span><span style="display:flex;"><span>	<span style="color:#d14">&#39;Hello, world!&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// React.createElement() 会预先进行一些检查，实际上创建了如下对象，
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 这些对象被称为 “React 元素”，
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// React 通过读取这些对象，然后使用它们来构建 DOM 以及保持随时更新
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 注意：这是简化过的结构
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> {
</span></span><span style="display:flex;"><span>	type<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;h1&#39;</span>,
</span></span><span style="display:flex;"><span>	props<span style="color:#000;font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>		className<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;greeting&#39;</span>,
</span></span><span style="display:flex;"><span>		children<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;Hello, world!&#39;</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><p>是的，JSX 就是这么简单 ❗</p>
<h3 id="元素渲染">元素渲染</h3>
<p>在上一节中，我们已经多次提到了 React “元素” ，它究竟是什么呢？</p>
<p>元素描述了你在屏幕上想看到的内容。如 <code>element</code> 就是一个 React 元素：</p>
<pre tabindex="0"><code>const element = &lt;h1&gt;Hello, world&lt;/h1&gt;;
</code></pre><p>与浏览器的 DOM 元素不同，React 元素是创建开销极小的普通对象（详见上节）。React DOM 会负责更新 DOM 来与 React 元素保持一致。</p>
<p><code>&gt; 那 React DOM 到底是如何渲染 React 元素为 DOM 的呢 ❓</code></p>
<p>只需要把它们传入 <code>ReactDOM.render()</code> 就可以了（该元素会被自动渲染到根 DOM 节点中）！</p>
<p>需要注意的是， <strong>React 元素是不可变对象！</strong> 一旦被创建，你就无法更改它的子元素或者属性。</p>
<p>如何更新 UI 呢？</p>
<p>根据我们已有的知识，更新 UI 唯一的方式是创建一个全新的元素，并将其传入 <code>ReactDOM.render()</code>。React DOM 会将元素和它的子元素与它们之前的状态进行比较，并只会进行必要的更新来使 DOM 达到预期的状态。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> tick() {
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> (
</span></span><span style="display:flex;"><span>		&lt;<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#000080">h1</span>&gt;Hello, world<span style="color:#000;font-weight:bold">!</span>&lt;/<span style="color:#000080">h1</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#000080">h2</span>&gt;It is {<span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Date</span>().toLocaleTimeString()}.&lt;/<span style="color:#000080">h2</span>&gt;
</span></span><span style="display:flex;"><span>		&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>	);
</span></span><span style="display:flex;"><span>	ReactDOM.render(element, <span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;root&#39;</span>));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 每秒都创建一个新元素，并传入 ReactDOM.render()
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>setInterval(tick, <span style="color:#099">1000</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>当然，在实践中，我们并不会那么蠢，大多数 React 应用只会调用一次 <code>ReactDOM.render()</code>，后续我们将学习如何封装一个有状态的组件。</p>
<h3 id="组件--props">组件 &amp; Props</h3>
<blockquote>
<p>组件允许你将 UI 拆分为独立可复用的代码片段，并对每个片段进行独立构思。</p>
</blockquote>
<p>组件，从概念上类似于 JavaScript 函数。它接受任意的入参（即 “props”），并返回用于描述页面展示内容的 React 元素。</p>
<p>在 React 中，有两种组件形式：函数组件和类组件，如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 函数组件
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">function</span> Welcome(props) {
</span></span><span style="display:flex;"><span>  	<span style="color:#000;font-weight:bold">return</span> &lt;<span style="color:#000080">h1</span>&gt;Hello, {props.name}&lt;/<span style="color:#000080">h1</span>&gt;;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 类组件
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">class</span> Welcome <span style="color:#000;font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>	render() {
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">return</span> &lt;<span style="color:#000080">h1</span>&gt;Hello, {<span style="color:#000;font-weight:bold">this</span>.props.name}&lt;/<span style="color:#000080">h1</span>&gt;;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>上述两个组件在 React 里是等效的。 <strong>它们返回的都是 React 元素哦！</strong></p>
<blockquote>
<p>:: 在实际应用中，函数式组件明显更受欢迎，也更符合直觉，再加上现在有了 Hook，所以你懂得 ……</p>
</blockquote>
<p>例如，这段代码会在页面上渲染 “Hello, Sara”：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> Welcome(props) {
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> &lt;<span style="color:#000080">h1</span>&gt;Hello, {props.name}&lt;/<span style="color:#000080">h1</span>&gt;;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> element <span style="color:#000;font-weight:bold">=</span> &lt;<span style="color:#000080">Welcome</span> <span style="color:#008080">name</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Sara&#34;</span> /&gt;;
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>	element,
</span></span><span style="display:flex;"><span>	<span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>让我们来回顾一下这个例子中发生了什么：</p>
<ul>
<li>我们调用 <code>ReactDOM.render()</code> 函数，并传入 <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code> 作为参数；</li>
<li>React 调用 Welcome 组件，并将 <code>{name: 'Sara'}</code> 作为 <code>props</code> 传入；</li>
<li>Welcome 组件将 <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> 元素作为返回值；</li>
<li>React DOM 将 DOM 高效地更新为 <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>。</li>
</ul>
<p><strong>注意： 组件名称必须以大写字母开头 ！！！</strong>（React 会将以小写字母开头的组件视为原生 DOM 标签）</p>
<p>组件可以在其输出中引用其他组件（组件组合）。有时候，将组件拆分为更小的组件也是很不错的选择（组件提取）。</p>
<p><strong>所有 React 组件都必须像纯函数一样保护它们的 props 不被更改。</strong></p>
<blockquote>
<p>:: 其实，props 很简单，就把它理解为一个只读的函数入参就行了！函数，你足够了解的，对吧？</p>
</blockquote>
<p>Props 是不可变的，但应用程序的 UI 是动态的，并会伴随着时间的推移而变化，emm… 😟</p>
<p>放心！在下一章节中，我们将介绍一种新的概念，称之为 “state”。在不违反上述规则的情况下，state 允许 React 组件随用户操作、网络响应或者其他变化而动态更改输出内容。</p>
<h3 id="state--生命周期">State &amp; 生命周期</h3>
<p>在元素渲染章节中，我们只了解了一种更新 UI 界面的方法，通过调用 <code>ReactDOM.render()</code> 来修改我们想要渲染的元素。</p>
<p>我们也说了，那种方法有点蠢 🤣！ 在本章节中，我们将学习如何封装真正可复用的组件。</p>
<p><strong>State 与 props 类似，但是 state 是私有的，并且完全受控于当前组件。</strong></p>
<p>下面，让我们看一个完整的 Clock 组件（<code>请留意注释内容</code>）：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> Clock <span style="color:#000;font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>	<span style="color:#998;font-style:italic">// 构造函数 - 用来初始化的
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	constructor(props) {
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// 将 props 传递到父类的构造函数中 ❓
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// Class 组件应该始终使用 props 参数来调用父类的构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// 在构造函数中为 this.state 赋初值
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">this</span>.state <span style="color:#000;font-weight:bold">=</span> { data<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Date</span>() };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// 将生命周期方法添加到 Class 中
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// ^ 组件挂载
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		componentDidMount() {
</span></span><span style="display:flex;"><span>			<span style="color:#998;font-style:italic">// 尽管 this.props 和 this.state 是 React 本身设置的，且都拥有特殊的含义，
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			<span style="color:#998;font-style:italic">// 但是其实你可以向 class 中随意添加不参与数据流（比如计时器 ID）的额外字段
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			<span style="color:#000;font-weight:bold">this</span>.timerID <span style="color:#000;font-weight:bold">=</span> setInterval(() =&gt; <span style="color:#000;font-weight:bold">this</span>.tick(), <span style="color:#099">1000</span> );
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// ^ 组件卸载
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		componentWillUnmount() {
</span></span><span style="display:flex;"><span>			clearInterval(<span style="color:#000;font-weight:bold">this</span>.timerID);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		tick() {
</span></span><span style="display:flex;"><span>			<span style="color:#998;font-style:italic">// 使用 this.setState() 来时刻更新组件 state
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			<span style="color:#000;font-weight:bold">this</span>.setState({
</span></span><span style="display:flex;"><span>				date<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Date</span>()
</span></span><span style="display:flex;"><span>			});
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		render() {
</span></span><span style="display:flex;"><span>			<span style="color:#000;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">h1</span>&gt;Hello, world<span style="color:#000;font-weight:bold">!</span>&lt;/<span style="color:#000080">h1</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">h2</span>&gt;It is {<span style="color:#000;font-weight:bold">this</span>.state.date.toLocaleTimeString()}.&lt;/<span style="color:#000080">h2</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>			);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#000080">Clock</span> /&gt;,
</span></span><span style="display:flex;"><span>	<span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>让我们来快速概括一下发生了什么和这些方法的调用顺序：</p>
<ol>
<li>当 <code>&lt;Clock /&gt;</code> 被传给 <code>ReactDOM.render()</code> 的时候，React 会调用 <code>Clock</code> 组件的构造函数。因为 <code>Clock</code> 需要显示当前的时间，所以它会用一个包含当前时间的对象来初始化 <code>this.state</code> 。我们会在之后更新 <code>state</code> ；</li>
<li>之后 React 会调用组件的 <code>render()</code> 方法。这就是 React 确定该在页面上展示什么的方式。然后 React 更新 DOM 来匹配 <code>Clock</code> 渲染的输出；</li>
<li>当 <code>Clock</code> 的输出被插入到 DOM 中后，React 就会调用 <code>ComponentDidMount()</code> 生命周期方法。在这个方法中，<code>Clock</code> 组件向浏览器请求设置一个计时器来每秒调用一次组件的 <code>tick()</code> 方法；</li>
<li>浏览器每秒都会调用一次 <code>tick()</code> 方法。 在这方法之中，Clock 组件会通过调用 <code>setState()</code> 来计划进行一次 UI 更新。得益于 <code>setState()</code> 的调用，React 能够知道 <code>state</code> 已经改变了，然后会重新调用 <code>render()</code> 方法来确定页面上该显示什么。这一次，<code>render()</code> 方法中的 <code>this.state.date</code> 就不一样了，如此以来就会渲染输出更新过的时间。React 也会相应的更新 DOM；</li>
<li>一旦 Clock 组件从 DOM 中被移除，React 就会调用 <code>componentWillUnmount()</code> 生命周期方法，这样计时器就停止了。</li>
</ol>
<p><strong>是的！State 就是一个组件的核心！！！</strong> 下面我们来看一下，如何正确的使用它！</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 🅰️ 不要直接修改 State，应该使用 setState()
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 构造函数是唯一可以给 this.state 赋值的地方：
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">this</span>.state.comment <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;Hello&#39;</span>;	<span style="color:#998;font-style:italic">// ❌
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">this</span>.setState({comment<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;Hello&#39;</span>});	<span style="color:#998;font-style:italic">// ✔️
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 🅱️ State 的更新可能是异步的，不要依赖他们的值来更新下一个状态
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">this</span>.setState({
</span></span><span style="display:flex;"><span>  counter<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">this</span>.state.counter <span style="color:#000;font-weight:bold">+</span> <span style="color:#000;font-weight:bold">this</span>.props.increment,
</span></span><span style="display:flex;"><span>});	<span style="color:#998;font-style:italic">// 可能 ❌
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 要解决这个问题，可以让 setState() 接收一个函数而不是一个对象，
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 这个函数用上一个 state 作为第一个参数，将此次更新被应用时的 props 做为第二个参数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">this</span>.setState((state, props) =&gt; ({
</span></span><span style="display:flex;"><span>  counter<span style="color:#000;font-weight:bold">:</span> state.counter <span style="color:#000;font-weight:bold">+</span> props.increment
</span></span><span style="display:flex;"><span>}));	<span style="color:#998;font-style:italic">// ✔️
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>数据是向下流动的！</strong></p>
<p>不管是父组件或是子组件都无法知道某个组件是有状态的还是无状态的，并且它们也并不关心它是函数组件还是 class 组件。这就是为什么称 state 为局部的或是封装的的原因。除了拥有并设置了它的组件，其他组件都无法访问。</p>
<p>组件可以选择把它的 state 作为 props 向下传递到它的子组件中。</p>
<h3 id="事件处理">事件处理</h3>
<p>React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同：</p>
<ul>
<li>React 事件的命名采用小驼峰式（camelCase），而不是纯小写；</li>
<li>使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串；</li>
<li>在 React 中另一个不同点是你不能通过返回 <code>false</code> 的方式阻止默认行为，你必须显式的使用 <code>preventDefault</code> 。</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> ActionLink() {
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">function</span> handleClick(e) {
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// 在这里，e 是一个合成事件，React 根据 W3C 规范来定义这些合成事件
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		e.preventDefault();	<span style="color:#998;font-style:italic">// 显式的使用 ✔️
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		console.log(<span style="color:#d14">&#39;The link was clicked.&#39;</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>		&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">onClick</span><span style="color:#000;font-weight:bold">=</span>{handleClick}&gt;	<span style="color:#998;font-style:italic">// 注意，大括号外不要加引号
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			Click me
</span></span><span style="display:flex;"><span>		&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>	);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>另外，当你使用 ES6 class 语法定义一个组件的时候，通常的做法是将事件处理函数声明为 class 中的方法。如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> Toggle <span style="color:#000;font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>	constructor(props) {
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">this</span>.state <span style="color:#000;font-weight:bold">=</span> {isToggleOn<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">true</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// 为了在回调中使用 `this`，这个绑定是必不可少的，否则
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// 当你调用 onClick={this.handleClick} 这个事件函数回调的时候，
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// `this` 的值为 `undefined` ，会报错
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">this</span>.handleClick <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">this</span>.handleClick.bind(<span style="color:#000;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#998;font-style:italic">// bind 太麻烦 ？试试下面这个等效写法 - class fields 语法
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// Create React App 默认启用此语法
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// 此语法确保 `handleClick` 内的 `this` 已被绑定
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// 注意：这是 *实验性* 语法
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// handleClick = () =&gt; {
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// 	console.log(&#39;this is:&#39;, this);
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#998;font-style:italic">// }
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	handleClick() {
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">this</span>.setState(state =&gt; ({
</span></span><span style="display:flex;"><span>			isToggleOn<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">!</span>state.isToggleOn
</span></span><span style="display:flex;"><span>		}));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	render() {
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>		&lt;<span style="color:#000080">button</span> <span style="color:#008080">onClick</span><span style="color:#000;font-weight:bold">=</span>{<span style="color:#000;font-weight:bold">this</span>.handleClick}&gt;
</span></span><span style="display:flex;"><span>			{<span style="color:#000;font-weight:bold">this</span>.state.isToggleOn <span style="color:#000;font-weight:bold">?</span> <span style="color:#d14">&#39;ON&#39;</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;OFF&#39;</span>}
</span></span><span style="display:flex;"><span>		&lt;/<span style="color:#000080">button</span>&gt;
</span></span><span style="display:flex;"><span>		);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#000080">Toggle</span> /&gt;,
</span></span><span style="display:flex;"><span>	<span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>你必须谨慎对待 JSX 回调函数中的 <code>this</code>，在 JavaScript 中，class 的方法默认不会绑定 <code>this</code>。如果你忘记绑定 <code>this.handleClick</code> 并把它传入了 <code>onClick</code>，当你调用这个函数的时候 <code>this</code> 的值为 <code>undefined</code>。</p>
<p>这并不是 React 特有的行为，这其实与 JavaScript 函数工作原理有关。</p>
<blockquote>
<p>:: emm… this 可以说是 JavaScript 永远的痛了，好在应用起来并不算太难！</p>
</blockquote>
<p>在事件处理中，除了 <code>this</code> 的绑定之外，还有一个需要注意的地方 - 向事件处理程序传递参数。</p>
<p>在循环中，通常我们会为事件处理函数传递额外的参数。例如，若 id 是你要删除那一行的 ID，以下两种方式都可以向事件处理函数传递参数：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span>&lt;<span style="color:#000080">button</span> <span style="color:#008080">onClick</span><span style="color:#000;font-weight:bold">=</span>{(e) =&gt; <span style="color:#000;font-weight:bold">this</span>.deleteRow(id, e)}&gt;Delete Row&lt;/<span style="color:#000080">button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">button</span> <span style="color:#008080">onClick</span><span style="color:#000;font-weight:bold">=</span>{<span style="color:#000;font-weight:bold">this</span>.deleteRow.bind(<span style="color:#000;font-weight:bold">this</span>, id)}&gt;Delete Row&lt;/<span style="color:#000080">button</span>&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>上述两种方式是等价的，分别通过箭头函数和 Function.prototype.bind 来实现。</p>
<p>在这两种情况下，<strong>React 的事件对象 <code>e</code> 会被作为第二个参数传递。</strong> 如果通过箭头函数的方式，事件对象必须显式的进行传递，而通过 <code>bind</code> 的方式，事件对象以及更多的参数将会被隐式的进行传递。</p>
<h3 id="条件渲染">条件渲染</h3>
<p>这里，就不多讲了，只要记住 JSX 最终会被转成一个 JavaScript 对象，条件渲染也就是 <code>if</code> 或者条件运算符那点事了。</p>
<p>在极少数情况下，你可能希望能隐藏组件，即使它已经被其他组件渲染。若要完成此操作，你可以让 <code>render</code> 方法直接返回 <code>null</code>，而不进行任何渲染。在组件的 <code>render</code> 方法中返回 <code>null</code> 并不会影响组件的生命周期。</p>
<p>想要了解更多，直接阅读 <a href="https://react.docschina.org/docs/conditional-rendering.html">条件渲染</a> 。</p>
<h3 id="列表--key">列表 &amp; Key</h3>
<p>同上，略！</p>
<p>唯一需要注意的是 <code>key</code> ，它是什么？</p>
<p>key 帮助 React 识别哪些元素改变了，比如被添加或删除。因此你应当给数组中的每一个元素赋予一个确定的标识。</p>
<p><strong>元素的 key 只有放在就近的数组上下文中才有意义。</strong></p>
<blockquote>
<p>:: 所谓列表，就是利用一些迭代数据，组装出可用子元素集合，然后把它们放在应该放的父元素中就可以了。</p>
</blockquote>
<p>详见 <a href="https://react.docschina.org/docs/lists-and-keys.html">列表 &amp; Key</a> 。</p>
<h3 id="表单">表单</h3>
<p>主要是弄清楚 “受控组件” 和 “非受控组件” 的概念，就可以喽。详见 <a href="https://react.docschina.org/docs/forms.html">表单</a> 。</p>
<h3 id="状态提升">状态提升</h3>
<blockquote>
<p>:: 抽象和共享，永远不变的真理！</p>
</blockquote>
<blockquote>
<p>通常，多个组件需要反映相同的变化数据，这时我们建议将共享状态提升到最近的共同父组件中去。</p>
</blockquote>
<p>在 React 应用中，任何可变数据应当只有一个相对应的唯一“数据源”。通常，state 都是首先添加到需要渲染数据的组件中去。然后，如果其他组件也需要这个 state，那么你可以将它提升至这些组件的最近共同父组件中。你应当依靠自上而下的数据流，而不是尝试在不同组件间同步 state。</p>
<p>更多详见 <a href="https://react.docschina.org/docs/lifting-state-up.html">状态提升</a>。</p>
<h3 id="组合-vs-继承">组合 vs 继承</h3>
<p>详见 <a href="https://react.docschina.org/docs/composition-vs-inheritance.html">组合 vs 继承 – React - react.docschina.org</a>。</p>
<h3 id="react-哲学">React 哲学</h3>
<blockquote>
<p>我们认为，React 是用 JavaScript 构建快速响应的大型 Web 应用程序的首选方式。</p>
</blockquote>
<blockquote>
<p>:: emm… Vue：我才是，Angular：你们都是弟弟！</p>
</blockquote>
<p>OK，上心法 ❤️。</p>
<p><strong>第一步：将设计好的 UI 划分为组件层级</strong></p>
<p><strong>第二步：用 React 创建一个静态版本</strong></p>
<p><strong>第三步：确定 UI state 的 最小（且完整）表示</strong></p>
<p>通过问自己以下三个问题，你可以逐个检查相应数据是否属于 state：</p>
<ul>
<li>该数据是否是由父组件通过 props 传递而来的？如果是，那它应该不是 state。</li>
<li>该数据是否随时间的推移而保持不变？如果是，那它应该也不是 state。</li>
<li>你能否根据其他 state 或 props 计算出该数据的值？如果是，那它也不是 state。</li>
</ul>
<p><strong>第四步：确定 state 放置的位置</strong></p>
<p><strong>第五步：添加反向数据流</strong></p>
<blockquote>
<p>:: 基础的核心概念并不多（毕竟就是一个 UI 库嘛），但其思想非常好，官方文档也相当 OK ，可以不定期地多看几遍。</p>
</blockquote>
<h2 id="hook">HOOK</h2>
<blockquote>
<p>::不着急，先过几遍再说这个，很简单的！</p>
</blockquote>
<h2 id="相关技术栈">相关技术栈</h2>
<p>当然，你可以选择从零开始，但更好的选择是使用官方提供的脚架 - Create React App 。</p>
<h3 id="样式">样式</h3>
<p>React 对样式如何定义并没有明确态度；如果存在疑惑，比较好的方式是和平时一样，在一个单独的 <code>*.css</code> 文件定义你的样式，并且通过 <code>className</code> 指定它们。</p>
<p><strong>React 并没有原生提供 CSS 封装方案！！！</strong></p>
<p>React 本身的设计原则决定了其不会提供原生的 CSS 封装方案，或者说 CSS 封装并不是 React 框架本身的关注点。因此，React 社区从很早的时候就开始寻找相关替代办法。</p>
<pre tabindex="0"><code class="language-几种技术路线" data-lang="几种技术路线">- CSS 模块化（CSS Modules）

这种做法非常类似 Angular 与 Vue 对样式的封装方案，其核心是以 CSS 文件模块为单元，将模块内的选择器附上特殊的哈希字符串，以实现样式的局部作用域。对于大多数 React 项目来说，这种方案已经足够用了。

- 基于共识的人工维护的方法论，如 BEM

这种方法的缺点是会为团队带来很大的挑战，对于全局和局部规划选择器的命名，团队对于这种方法需要有共识，即使熟练使用的情况下，在使用中依然有着较高的思维负担和维护成本。

- Shadow DOM

借助 direflow.io 等工具，我们可以将 React 组件输出为 Web Component，借助 Shadow DOM 实现组件的 CSS 样式封装。这是一种解决办法，不过基本很少有项目选择这样做。

- CSS-in-JS
</code></pre><ol>
<li>SCSS</li>
</ol>
<p>好吧，相信你的项目是由 Create React App (CRA) 生成的，如果你想使用 SCSS ，只需要安装 <code>dart-sass</code> 库即可，像下面这样：</p>
<pre tabindex="0"><code>npm i sass --save-dev
</code></pre><p>感谢 <code>node-sass</code> 退出历史舞台，但感谢作者的贡献 😅！</p>
<p>OK，安装之后，就可以把 <code>*.scss</code> 文件作为一个模块引入了，如：</p>
<pre tabindex="0"><code>import example from &#39;./example.scss&#39;;
</code></pre><ol start="2">
<li>CSS in JS</li>
</ol>
<blockquote>
<p>注意此功能并不是 React 的一部分，而是由第三方库提供。</p>
</blockquote>
<p>“CSS-in-JS” 是指一种模式，其中 CSS 由 JavaScript 生成而不是在外部文件中定义。在 <a href="https://github.com/MicheleBertoli/css-in-js">此处</a> 阅读 CSS-in-JS 库之间的对比。</p>
<blockquote>
<p>:: CSS in JS 的本质就是写行内样式 style ❓❗</p>
</blockquote>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-react" data-lang="react"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> style <span style="color:#000;font-weight:bold">=</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#d14">&#39;color&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;red&#39;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#d14">&#39;fontSize&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;46px&#39;</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> clickHandler <span style="color:#000;font-weight:bold">=</span> () =&gt; alert(<span style="color:#d14">&#39;hi&#39;</span>); 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#000080">h1</span> <span style="color:#008080">style</span><span style="color:#000;font-weight:bold">=</span>{style} <span style="color:#008080">onclick</span><span style="color:#000;font-weight:bold">=</span>{clickHandler}&gt;
</span></span><span style="display:flex;"><span>		Hello, world<span style="color:#000;font-weight:bold">!</span>
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#000080">h1</span>&gt;,
</span></span><span style="display:flex;"><span>	<span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;example&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>当然，大项目，这样直接写是非常不明智的，好在有懒人包 🥳！</p>
<p>目前比较流行的两个解决方案是 <a href="https://styled-components.com/">styled-components</a> 和 <a href="https://emotion.sh/docs/introduction">Emotion</a> 。</p>
<p>相关参考：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/165089496">CSS-in-JS：一个充满争议的技术方案 - 知乎 - zhuanlan.zhihu.com</a></li>
</ul>
<ol start="3">
<li>CSS Modules 🏆（首推）</li>
</ol>
<blockquote>
<p>这种做法非常类似 Angular 与 Vue 对样式的封装方案，其核心是以 CSS 文件模块为单元，将模块内的选择器附上特殊的哈希字符串，以实现样式的局部作用域。对于大多数 React 项目来说，这种方案已经足够用了。</p>
</blockquote>
<p>由于一般的脚手架都默认集成了 CSS Modules，比如 React 官方的脚手架：create-react-app，已经将 CSS Modules 集成进来了，我们可以直接使用。</p>
<p><strong>如何使用呢？</strong></p>
<p>详见 <a href="https://www.jianshu.com/p/694f9c14ab35">在 React 中使用 CSS Modules</a>。</p>
<p><strong>关于样式污染和穿透</strong></p>
<p>在  <a href="https://juejin.cn/post/7031556713329197093">react中sass的使用，解决样式污染，样式穿透 - 掘金</a> ？</p>
<p>使用 CSS Modules ！<strong>最佳实践</strong> 如下：</p>
<ul>
<li>每个组件的根节点使用 CSS Modules 形式的类名（根元素的类名： <code>root</code>）</li>
<li>其他所有的子节点，都全用普通的 CSS 类名 <code>:global</code></li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scss" data-lang="scss"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// === index.module.scss ===
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">.root</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#008080">display</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;block&#39;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#008080">position</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;absolute&#39;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">// 此处，使用 global 包裹其他子节点的类名。此时，
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>  <span style="color:#998;font-style:italic">// 这些类名就不会被处理，在 JSX 中使用时，就可以用字符串形式的类名。
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>  <span style="color:#998;font-style:italic">// 如果不加 :global ，所有类名就必须添加 styles.title 才可以
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>  <span style="color:#3c5d5d;font-weight:bold">:global</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">.title</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#458;font-weight:bold">.text</span> {
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#000080">span</span> {
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">.login-form</span> { <span style="color:#458;font-weight:bold">...</span> }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span> styles from <span style="color:#d14">&#39;./index.module.scss&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> 组件 <span style="color:#000;font-weight:bold">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    {<span style="color:#998;font-style:italic">/* （1） 根节点使用 CSSModules 形式的类名（ 根元素的类名： `root` ）*/</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span>div className<span style="color:#000;font-weight:bold">=</span>{styles.root}<span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      {<span style="color:#998;font-style:italic">/* （2） 所有子节点，都使用普通的 CSS 类名*/</span>}
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">&lt;</span>h1 className<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;title&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">&lt;</span>span className<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;text&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>登录<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/span&gt;  </span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">&lt;</span>span<span style="color:#000;font-weight:bold">&gt;</span>登录<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/span&gt;  </span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/h1&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">&lt;</span>form className<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;login-form&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/form&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">​</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="路由">路由</h3>
<blockquote>
<p>Hmmm… 页面路由，大大的有用！</p>
</blockquote>
<ul>
<li><a href="https://reactrouter.com/en/main">Home v6.26.0 | React Router</a></li>
<li><a href="https://baimingxuan.github.io/react-router6-doc/start/tutorial">在开始之前 | React Router6 中文文档</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/431389907">react-router-dom 使用指南（最新 V6.0.1） - 知乎 - zhuanlan.zhihu.com</a></li>
<li><a href="https://uprogrammer.cn/react-router-cn/index.html">Introduction · React Router 中文手册 - uprogrammer.cn</a></li>
</ul>
<p>如果你使用服务端渲染 SSR 的话，你可以直接使用 Next、Remix 等既有的路由框架。</p>
<p>如果准备使用传统的客户端渲染（多数情况），直接使用 React Router 即可，如下：</p>
<pre tabindex="0"><code>#  npm install react-router-dom # always need this!

import * as React from &#34;react&#34;;
import * as ReactDOM from &#34;react-dom/client&#34;;
import {
  createBrowserRouter,
  RouterProvider,
} from &#34;react-router-dom&#34;;
import &#34;./index.css&#34;;

const router = createBrowserRouter([
  {
    path: &#34;/&#34;,
    element: &lt;div&gt;Hello world!&lt;/div&gt;,
  },
]);

ReactDOM.createRoot(document.getElementById(&#34;root&#34;)).render(
  &lt;React.StrictMode&gt;
    &lt;RouterProvider router={router} /&gt;
  &lt;/React.StrictMode&gt;
);
</code></pre><p>看，很简单吧。当然，实际项目中，把 router 逻辑单独提取出来作为一个模块引入将使你的代码更加简洁。</p>
<h3 id="状态管理">状态管理</h3>
<ul>
<li><a href="https://cn.redux.js.org/">Redux 中文官网 - JavaScript 应用的状态容器，提供可预测的状态管理。 | Redux 中文官网</a></li>
<li><a href="https://cn.react-redux.js.org/">React Redux 中文文档 | React Redux 中文文档</a></li>
</ul>
<h3 id="异步请求">异步请求</h3>
<ul>
<li><a href="https://juejin.cn/post/7197673814179119162#heading-8">都什么时代还在发传统请求？来看看 SWR 如何用 React Hook 实现优雅请求 - 掘金</a></li>
</ul>
<h2 id="示例">示例</h2>
<p>这里我们附上一个基本的脚手架搭建示例，它使用以下技术：</p>
<ul>
<li>Vite</li>
<li>TypeScript</li>
<li>SWC</li>
<li>React Router</li>
<li>SCSS</li>
<li>Aixos</li>
<li>Redux</li>
<li>&hellip;</li>
</ul>
<p>具体内容跳转到 [[React 基础脚手架示例]] 。</p>
    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=">
            

        </a>

        
        <a href="/about" target="_blank">
            
            将喜欢的一切留在身边，这便是努力的意义
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">🕊️</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.69); 
                backdrop-filter: saturate(180%) blur(6px);
            
            "></div>
    </body>
</html>
